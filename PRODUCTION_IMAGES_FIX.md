# ๐ผ๏ธ ุญู ูุดููุฉ ุตูุฑ ุงูุจุทุงูุงุช ูู ุงูุฅูุชุงุฌ

## ๐ด ุงููุดููุฉ

ุตูุฑ ุงูุจุทุงูุงุช ูุง ุชุธูุฑ ุนูู ุณูุฑูุฑ ุงูุฅูุชุงุฌ (`https://sabq.io`) ุจุณุจุจ:

1. **ุงูุตูุฑ ุงููุญููุฉ** (`/uploads/`) - ูุง ูููู ุงููุตูู ุฅูููุง ูู ุงูุฎุงุฑุฌ
2. **ุตูุฑ S3** - ุชูููุนุงุช ููุชููุฉ ุงูุตูุงุญูุฉ ุฃู ุฅุนุฏุงุฏุงุช CORS ุฎุงุทุฆุฉ  
3. **ุนุฏู ูุฌูุฏ NEXT_PUBLIC_SITE_URL** - ููุง ูููุน ุชุญููู ุงููุณุงุฑุงุช ุงููุณุจูุฉ
4. **ุฑูุงุจุท ูุงุฑุบุฉ ุฃู ุบูุฑ ุตุงูุญุฉ** - `null`, `undefined`, ูุณุงุฑุงุช ุฎุงุทุฆุฉ

## โ ุงูุญู ุงููููุฐ

### 1. **ูุนุงูุฌ ุตูุฑ ุงูุฅูุชุงุฌ ุงูููุญุฏ**
```typescript
// lib/production-image-fix.ts
export function getProductionImageUrl(imageUrl, options) {
  // ูุญูู ุฌููุน ุฃููุงุน ุงูุตูุฑ ุฅูู ุฑูุงุจุท ุตุงูุญุฉ
  // ูุณุชุฎุฏู ุตูุฑ Cloudinary ุงูุงูุชุฑุงุถูุฉ ููุตูุฑ ุงูููููุฏุฉ
}
```

### 2. **ุชุญุฏูุซ ุงูููููุงุช**
- **ArticleCard.tsx** - ูุณุชุฎุฏู `getProductionImageUrl` ูู ุงูุฅูุชุงุฌ
- **SmartContentNewsCard.tsx** - ููุณ ุงููุนุงูุฌุฉ ููุจุทุงูุงุช ุงููุฎุตุตุฉ
- **SafeImage.tsx** - ูุนุงูุฌ ุญุงูุงุช ุงูุตูุฑ ุงููุงุฑุบุฉ

### 3. **ุตูุฑ Cloudinary ุงูุงูุชุฑุงุถูุฉ**
```
article: https://res.cloudinary.com/dlaibl7id/image/upload/v1753111461/defaults/article-placeholder.jpg
category: https://res.cloudinary.com/dlaibl7id/image/upload/v1753111461/defaults/category-placeholder.jpg
author: https://res.cloudinary.com/dlaibl7id/image/upload/v1753111461/defaults/default-avatar.png
```

## ๐ ุฎุทูุงุช ุงููุดุฑ

### 1. **ูุดุฑ ุงูุชุญุฏูุซุงุช**
```bash
# ุนูู ุฌูุงุฒู ุงููุญูู
git add -A
git commit -m "๐ ุฅุตูุงุญ ูุดููุฉ ุตูุฑ ุงูุจุทุงูุงุช ูู ุงูุฅูุชุงุฌ"
git push origin main

# ุนูู ุณูุฑูุฑ ุงูุฅูุชุงุฌ
cd /var/www/sabq-ai-cms
git pull
npm ci
npm run build
pm2 restart sabq-cms
```

### 2. **ูุญุต ุงูุตูุฑ ุงูุญุงููุฉ**
```bash
# ูุญุต ุฃููุงุน ุงูุตูุฑ ุงููุณุชุฎุฏูุฉ
node scripts/test-production-images.js

# ุฅุตูุงุญ ุงูุตูุฑ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
node scripts/fix-production-card-images.js
```

### 3. **ูุฑุงูุจุฉ ุงููุชุงุฆุฌ**
- ุงูุชุญ `https://sabq.io`
- ุชุญูู ูู ุธููุฑ ุตูุฑ ุงูุจุทุงูุงุช ูู:
  - ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
  - ุตูุญุฉ ุงูุฃุฎุจุงุฑ `/news`
  - ุตูุญุฉ ุงูุชุตูููุงุช `/categories`
  - ุงูุจุทุงูุงุช ุงููุฎุตุตุฉ ุงูุฐููุฉ

## ๐ง ูุนุงูุฌุฉ ุงูุญุงูุงุช ุงูุฎุงุตุฉ

### ุงูุตูุฑ ุงููุญููุฉ
```javascript
// ูุจู
src="/uploads/image.jpg"

// ุจุนุฏ (ูู ุงูุฅูุชุงุฌ)
src="https://sabq.io/uploads/image.jpg"
```

### ุตูุฑ S3
```javascript
// ูุจู (ูุน ุชูููุนุงุช)
src="https://s3.amazonaws.com/bucket/image.jpg?X-Amz-Signature=..."

// ุจุนุฏ (ุจุฏูู ุชูููุนุงุช)
src="https://s3.amazonaws.com/bucket/image.jpg"
```

### ุงูุตูุฑ ุงููุงุฑุบุฉ
```javascript
// ูุจู
src="" ุฃู src={null} ุฃู src={undefined}

// ุจุนุฏ
src="https://res.cloudinary.com/dlaibl7id/image/upload/v1753111461/defaults/article-placeholder.jpg"
```

## ๐ ุชูุตูุงุช ูุณุชูุจููุฉ

1. **ุชูุญูุฏ ุงูุชุฎุฒูู ุนูู Cloudinary**
   - ุฑูุน ุฌููุน ุงูุตูุฑ ุงูุฌุฏูุฏุฉ ุฅูู Cloudinary
   - ุชุฑุญูู ุงูุตูุฑ ุงููุฏููุฉ ุชุฏุฑูุฌูุงู

2. **ุฅุถุงูุฉ ูุชุบูุฑุงุช ุงูุจูุฆุฉ**
   ```env
   NEXT_PUBLIC_SITE_URL=https://sabq.io
   NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME=dlaibl7id
   ```

3. **ุงุณุชุฎุฏุงู Image Optimization**
   - ุชูุนูู ุฎุฏูุฉ ุชุญุณูู ุงูุตูุฑ ูู Cloudinary
   - ุงุณุชุฎุฏุงู ุชูุณููุงุช ุญุฏูุซุฉ (WebP, AVIF)

4. **ูุฑุงูุจุฉ ุงูุฃุฏุงุก**
   - ูุชุงุจุนุฉ ุณุฑุนุฉ ุชุญููู ุงูุตูุฑ
   - ูุฑุงูุจุฉ ูุนุฏู ุงูุตูุฑ ุงูููููุฏุฉ

## ๐ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

ุจุนุฏ ุชุทุจูู ูุฐู ุงูุญููู:
- โ ุฌููุน ุตูุฑ ุงูุจุทุงูุงุช ุณุชุธูุฑ ุจุดูู ุตุญูุญ
- โ ุตูุฑ ุงุญุชูุงุทูุฉ ุฌูููุฉ ูููุญุชูู ุจุฏูู ุตูุฑ
- โ ุฃุฏุงุก ูุญุณูู ูุน Cloudinary CDN
- โ ูุง ูุฒูุฏ ูู ุงูุตูุฑ ุงูููุณูุฑุฉ 