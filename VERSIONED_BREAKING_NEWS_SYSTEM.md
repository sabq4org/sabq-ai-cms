# 🚨 نظام الأخبار العاجلة المطور - النسختان الكاملة والخفيفة

## 📋 نظرة عامة

تم تطوير نظام شامل لعرض الأخبار العاجلة يدعم نسختين مختلفتين:

### 🔴 النسخة الكاملة (Full Version)
- **الموقع**: شريط ملصق بالهيدر مباشرة
- **التصميم**: شريط أحمر كامل العرض مع تدرج لوني
- **الميزات**: 
  - أيقونة نبضة حمراء
  - عنوان الخبر مع رابط التفاصيل
  - توقيت النشر النسبي
  - زر إغلاق اختياري
  - تأثيرات حركية متقدمة

### 🟡 النسخة الخفيفة (Light Version)
- **الموقع**: مستطيل ناعم بحدود حمراء بين شريط الإحصائيات والنشرة الصوتية
- **التصميم**: بطاقة مستطيلة بخلفية ناعمة وحدود حمراء
- **الميزات**:
  - هيدر أحمر صغير مع أيقونة نبضة
  - صورة الخبر (إن وجدت)
  - عنوان ونبذة/ملخص
  - معلومات التوقيت
  - رابط "اقرأ التفاصيل"
  - تأثيرات بصرية محسنة

## 🏗️ البنية التقنية

### المكونات الأساسية

```
components/
├── VersionedBreakingNews.tsx    # المكون الأساسي للنسختين
└── (المكونات القديمة)
    ├── UnifiedBreakingNews.tsx
    ├── BreakingNewsBanner.tsx
    ├── LightBreakingNews.tsx
    └── SimpleBreakingNews.tsx
```

### التكامل في الصفحة الرئيسية

```tsx
// app/page-client.tsx

{/* النسخة الكاملة - أسفل الهيدر مباشرة */}
<VersionedBreakingNews version="full" isMobile={isMobile} />

{/* النسخة الخفيفة للموبايل - بين الإحصائيات والنشرة الصوتية */}
{isMobile && (
  <VersionedBreakingNews version="light" isMobile={true} />
)}

{/* النسخة الخفيفة للديسكتوب - بين النشرة الصوتية والتحليل العميق */}
{!isMobile && (
  <VersionedBreakingNews version="light" isMobile={false} />
)}
```

## 🎨 التحسينات البصرية

### ملف CSS المخصص
```
styles/versioned-breaking-news.css
```

**الميزات المضافة**:
- ✨ تأثيرات النبض والحركة المتقدمة
- 🌊 تأثير الموج على الشريط العلوي
- 🎯 حدود متحركة للنسخة الخفيفة
- 📱 استجابة محسنة للموبايل
- 🌙 دعم شامل للوضع الليلي
- 💫 تأثيرات الظل المتقدمة
- 🔗 رسوم متحركة للروابط

## 🔧 API والبيانات

### نقطة نهاية API
```
GET /api/breaking-news
```

**الاستجابة**:
```json
{
  "success": true,
  "data": {
    "id": "...",
    "title": "عنوان الخبر العاجل",
    "slug": "breaking-news-slug",
    "summary": "ملخص الخبر العاجل",
    "lead": "مقدمة الخبر",
    "featuredImage": "رابط الصورة",
    "publishedAt": "2025-07-20T...",
    "category": "التصنيف"
  }
}
```

### شروط العرض
يتم عرض الخبر العاجل إذا:
- ✅ `status = 'published'`
- ✅ `published_at` ليس null
- ✅ إحدى هذه الحقول صحيحة في metadata:
  - `isBreakingNews: true`
  - `breaking: true` 
  - `is_breaking: true`

## 📱 السلوك حسب الجهاز

### الديسكتوب
1. **النسخة الكاملة**: شريط أحمر أسفل الهيدر مباشرة
2. **النسخة الخفيفة**: بطاقة مفصلة بين النشرة الصوتية والتحليل العميق

### الموبايل
1. **النسخة الكاملة**: شريط أحمر مضغوط أسفل الهيدر
2. **النسخة الخفيفة**: بطاقة عمودية بين شريط الإحصائيات والنشرة الصوتية

## 🎯 المميزات المتقدمة

### التفاعل
- ⏰ **توقيت ديناميكي**: "منذ X دقيقة/ساعة" أو تاريخ كامل
- 🔗 **روابط ذكية**: توجه لصفحة المقال الكاملة
- ❌ **إغلاق اختياري**: يمكن إخفاء الخبر مؤقتاً
- 🖼️ **صور تفاعلية**: تظهر فقط في النسخة الخفيفة

### الأداء
- ⚡ **تحميل سريع**: API محسن للاستجابة السريعة
- 🔄 **تحديث تلقائي**: يجلب الأخبار العاجلة عند تحميل الصفحة
- 💾 **ذاكرة محلية**: يحفظ حالة الإغلاق
- 📊 **Lazy Loading**: تحميل مشروط حسب وجود البيانات

## 🛠️ التطوير والصيانة

### إضافة خبر عاجل جديد
```javascript
// في لوحة التحكم أو قاعدة البيانات
{
  title: "عنوان الخبر العاجل",
  status: "published",
  published_at: new Date(),
  metadata: {
    isBreakingNews: true,
    category: "التصنيف المناسب"
  }
}
```

### التخصيص والتحسين
- 🎨 **الألوان**: قابلة للتعديل في CSS
- 📏 **الأبعاد**: مرنة حسب المحتوى
- 🔧 **السلوك**: قابل للتخصيص في المكون
- 📱 **الاستجابة**: محسنة لجميع الأحجام

## 🎉 النتيجة النهائية

✅ **نظام شامل** يدعم نسختين مختلفتين  
✅ **تصميم احترافي** مع تأثيرات بصرية متقدمة  
✅ **استجابة كاملة** للموبايل والديسكتوب  
✅ **أداء محسن** مع API سريع  
✅ **تجربة مستخدم ممتازة** مع تفاعل سلس  

---

**🔗 الملفات المحدثة:**
- `components/VersionedBreakingNews.tsx` (جديد)
- `app/page-client.tsx` (محدث)
- `app/layout.tsx` (محدث)
- `styles/versioned-breaking-news.css` (جديد)
