# نظام إدارة أعضاء الفريق - صحيفة سبق الذكية

## نظرة عامة

تم تطوير نظام متكامل لإدارة أعضاء فريق العمل في صحيفة سبق الذكية، مع فصل كامل بين:
- **مستخدمي الواجهة العامة (القراء)**: يسجلون في الموقع، يختارون اهتماماتهم، ويتابعون المحتوى
- **أعضاء فريق العمل (الإداريين)**: يُدارون من لوحة التحكم بصلاحيات مختلفة

## المميزات الرئيسية

### 1. فصل البيانات
- أعضاء الفريق يُخزنون في `team-members.json` منفصل تماماً عن `users.json`
- لا يوجد ربط بين حسابات القراء وحسابات الفريق الإداري
- كل نظام له بياناته وصلاحياته المستقلة

### 2. إدارة متقدمة للأعضاء
- إضافة أعضاء جدد مباشرة دون الحاجة للبحث في المستخدمين
- تحديد الدور والقسم والصلاحيات لكل عضو
- إمكانية رفع صورة شخصية لكل عضو
- حالة التفعيل (نشط/غير نشط)
- حالة التوثيق الداخلي (موثق/غير موثق)

### 3. الحقول المتاحة لكل عضو
```typescript
{
  id: string;              // معرف فريد
  name: string;            // الاسم الكامل
  email: string;           // البريد الإلكتروني (فريد)
  password: string;        // كلمة المرور (مشفرة)
  avatar?: string;         // رابط الصورة الشخصية
  roleId: string;          // معرف الدور
  isActive: boolean;       // حالة التفعيل
  isVerified: boolean;     // حالة التوثيق
  createdAt: string;       // تاريخ الإنشاء
  lastLogin?: string;      // آخر تسجيل دخول
  phone?: string;          // رقم الهاتف
  department?: string;     // القسم
  bio?: string;            // نبذة شخصية
}
```

## واجهة برمجة التطبيقات (API)

### 1. إدارة قائمة الأعضاء

#### GET /api/team-members
جلب جميع أعضاء الفريق
```json
{
  "success": true,
  "data": [
    {
      "id": "tm-1",
      "name": "أحمد المحرر",
      "email": "ahmed.editor@sabq.ai",
      "roleId": "editor",
      "isActive": true,
      "isVerified": true,
      // ... باقي الحقول (بدون كلمة المرور)
    }
  ]
}
```

#### POST /api/team-members
إضافة عضو جديد
```json
// الطلب
{
  "name": "محمد المراسل",
  "email": "mohammed@sabq.ai",
  "password": "securePassword123",
  "roleId": "correspondent",
  "avatar": "/avatars/mohammed.jpg",
  "isActive": true,
  "isVerified": false
}

// الاستجابة
{
  "success": true,
  "data": {
    "id": "tm-123456789",
    "name": "محمد المراسل",
    // ... باقي البيانات (بدون كلمة المرور)
  }
}
```

### 2. إدارة عضو محدد

#### GET /api/team-members/[id]
جلب بيانات عضو محدد

#### PATCH /api/team-members/[id]
تحديث بيانات عضو
```json
// يمكن تحديث أي من الحقول التالية:
{
  "name": "الاسم الجديد",
  "email": "newemail@sabq.ai",
  "password": "newPassword123", // اختياري
  "roleId": "editor",
  "department": "التحرير",
  "phone": "+966501234567",
  "bio": "نبذة محدثة",
  "isActive": false,
  "isVerified": true
}
```

#### DELETE /api/team-members/[id]
حذف عضو من الفريق

## واجهة المستخدم

### صفحة إدارة الفريق `/dashboard/team`

#### المميزات:
1. **عرض الأعضاء**: جدول شامل بجميع أعضاء الفريق
2. **البحث والتصفية**: 
   - البحث بالاسم أو البريد أو الدور
   - التصفية حسب القسم
   - التصفية حسب الحالة (نشط/غير نشط/موثق/غير موثق)
3. **الإحصائيات**: 
   - إجمالي الأعضاء
   - الأعضاء النشطون
   - عدد الأدوار
   - عدد الأقسام
4. **التصدير**: إمكانية تصدير البيانات كملف CSV

### نموذج إضافة/تعديل عضو

#### الحقول المطلوبة:
- **الاسم**: اسم العضو الكامل
- **البريد الإلكتروني**: يجب أن يكون فريداً
- **كلمة المرور**: 6 أحرف على الأقل (في حالة الإضافة)
- **الدور**: اختيار من قائمة الأدوار المتاحة

#### الحقول الاختيارية:
- **الهاتف**: رقم الهاتف
- **القسم**: القسم التابع له
- **الصورة الشخصية**: رفع صورة مع معاينة
- **النبذة الشخصية**: وصف مختصر
- **حالة التفعيل**: نشط/غير نشط
- **حالة التوثيق**: موثق/غير موثق

## الأقسام المتاحة
- التحرير
- المراسلين
- التقنية
- التسويق
- المراجعة والتدقيق
- الإدارة

## الأمان

### تشفير كلمات المرور
- جميع كلمات المرور مشفرة باستخدام bcrypt
- لا يتم عرض كلمات المرور في أي استجابة API
- عند التعديل، يمكن ترك حقل كلمة المرور فارغاً للاحتفاظ بالقيمة الحالية

### التحقق من البيانات
- التحقق من صحة البريد الإلكتروني
- التحقق من عدم تكرار البريد الإلكتروني
- التحقق من طول كلمة المرور (6 أحرف على الأقل)

## التوسع المستقبلي

### إمكانيات يمكن إضافتها:
1. **نظام تسجيل الدخول المنفصل**: للفريق الإداري
2. **سجل النشاطات**: تتبع جميع العمليات على أعضاء الفريق
3. **صلاحيات متقدمة**: ربط الصلاحيات بالأعضاء مباشرة
4. **التكامل مع Active Directory**: للمؤسسات الكبيرة
5. **المصادقة الثنائية**: لتعزيز الأمان
6. **إشعارات البريد الإلكتروني**: عند إضافة أو تعديل الحسابات

## أمثلة الاستخدام

### إضافة مراسل جديد
1. الذهاب إلى `/dashboard/team`
2. النقر على "إضافة عضو"
3. ملء البيانات:
   - الاسم: "عبدالله السلمي"
   - البريد: "abdullah.salmi@sabq.ai"
   - كلمة المرور: "Secure@123"
   - الدور: "مراسل"
   - القسم: "المراسلين"
   - رفع صورة شخصية
   - تفعيل الحساب مباشرة
4. حفظ البيانات

### تعطيل حساب عضو مؤقتاً
1. البحث عن العضو في القائمة
2. النقر على أيقونة التعديل
3. تغيير حالة "التفعيل" إلى "غير نشط"
4. حفظ التغييرات

### توثيق عضو بعد فترة التقييم
1. البحث عن العضو
2. فتح نموذج التعديل
3. تغيير حالة "التوثيق" إلى "موثق"
4. يمكن أيضاً تحديث الدور إذا لزم الأمر
5. حفظ التغييرات

## الخلاصة

هذا النظام يوفر:
- ✅ فصل كامل بين بيانات القراء والفريق الإداري
- ✅ مرونة في إدارة الأعضاء والصلاحيات
- ✅ أمان عالي في التعامل مع البيانات الحساسة
- ✅ واجهة سهلة الاستخدام مع دعم الوضع الليلي
- ✅ قابلية للتوسع والتطوير المستقبلي 