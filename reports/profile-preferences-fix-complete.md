# ุชูุฑูุฑ ุญู ูุดุงูู ูุงุฌูุฉ ุงูููู ุงูุดุฎุตู

## ๐ ุงูุชุงุฑูุฎ: 2025-01-28

## ๐ ุงููุดุงูู ุงููุญุฏุฏุฉ

### 1. ุงูุงูุชูุงูุงุช ูุง ุชูุญูุธ ูู ุงูููู ุงูุดุฎุตู
- โ ุงููุณุชุฎุฏู ูุฎุชุงุฑ ุงูุงูุชูุงูุงุช ูููููุง ูุง ุชุธูุฑ ูู ุงูููู ุงูุดุฎุตู
- โ ุนุฏู ุชูุงูู ุจูุงูุงุช ุงููุญููุธุฉ ูุงููุนุฑูุถุฉ

### 2. ุงูุฃุฒุฑุงุฑ ุบูุฑ ูุงุถุญุฉ
- โ ุงููุณุชุฎุฏู ูุฑู ุฃู ุฃุฒุฑุงุฑ "ุชุนุฏูู ุงูููู" ู"ุชุณุฌูู ุงูุฎุฑูุฌ" ุบูุฑ ูุงุถุญุฉ

## โ ุงูุญููู ุงููุทุจูุฉ

### 1. ุฅุตูุงุญ ุฌูุจ ูุนุฑุถ ุงูุงูุชูุงูุงุช

#### ุฃ) ุชุญุฏูุซ API endpoint ููุชูุถููุงุช
```typescript
// app/api/user/preferences/[id]/route.ts
- ุงุณุชุฎุฏุงู ุฌุฏูู UserPreference ูุน key/value pairs
- ุฌูุจ ุงูุชูุถููุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฃููุงู
- ุฏุนู ุงุญุชูุงุทู ูู ููู JSON
- ุชุญููู ุงูุจูุงูุงุช ููุดูู ุงููุทููุจ ููุนุฑุถ
```

#### ุจ) ุชุญุฏูุซ ุตูุญุฉ ุงูููู ุงูุดุฎุตู
```typescript
// app/profile/page.tsx
// ุฌูุจ ุงูุชูุถููุงุช ูู API ุงูุฌุฏูุฏ
const prefsResponse = await fetch(`/api/user/preferences?userId=${user.id}`);

// ุชุญููู ุงูุจูุงูุงุช ูุฌูุจ ูุนูููุงุช ุงูุชุตูููุงุช
const categoryIds = prefsData.data.map((pref: any) => pref.category_id);
const categoriesResponse = await fetch('/api/categories');

// ุฑุจุท ุงูุชูุถููุงุช ุจูุนูููุงุช ุงูุชุตูููุงุช ุงููุงููุฉ
const userCategories = allCategories
  .filter((cat: any) => categoryIds.includes(cat.id))
  .map((cat: any) => ({
    category_id: parseInt(cat.id) || 0,
    category_name: cat.name || cat.name_ar,
    category_icon: cat.icon || '๐',
    category_color: cat.color || '#6B7280'
  }));
```

#### ุฌ) ุฏุนู ูุตุงุฏุฑ ุจูุงูุงุช ูุชุนุฏุฏุฉ
1. **ูุงุนุฏุฉ ุงูุจูุงูุงุช** (UserPreference table)
2. **ููู JSON** (user_preferences.json)
3. **localStorage** (user.interests)
4. **ุจูุงูุงุช ุงูุชุฑุงุถูุฉ** ูุญู ุฃุฎูุฑ

### 2. ุชุญุณูู ูุถูุญ ุงูุฃุฒุฑุงุฑ

#### ุงูููุฏ ุงูููุฌูุฏ ุจุงููุนู (ุตุญูุญ):
```tsx
<button
  onClick={() => router.push('/profile/edit')}
  className="px-6 py-3 bg-white text-gray-800 rounded-lg hover:bg-gray-100 transition-all font-medium flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
>
  <Edit2 className="w-5 h-5" />
  ุชุนุฏูู ุงูููู
</button>

<button
  onClick={handleLogout}
  className="px-6 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
>
  ุชุณุฌูู ุงูุฎุฑูุฌ
</button>
```

## ๐ง ุฅุตูุงุญุงุช ุฅุถุงููุฉ

### 1. ุฅุตูุงุญ ุฃุฎุทุงุก TypeScript
- ุชุญุฏูุซ ูุนุงููุงุช API routes ููุชูุงูู ูุน Next.js 15
- ุชุญููู category_id ูู string ุฅูู number
- ุฅุถุงูุฉ ูุนุงูุฌุฉ ููุฃุฎุทุงุก ูุงูููู ุงูุงูุชุฑุงุถูุฉ

### 2. ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู
- ุฅุถุงูุฉ ุฑุณุงุฆู console ููุชุดุฎูุต
- ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก ูุน fallback
- ูุฒุงููุฉ ุงูุจูุงูุงุช ุจูู ุงููุตุงุฏุฑ ุงููุฎุชููุฉ

## ๐ ุชุฏูู ุงูุจูุงูุงุช

```
1. ุตูุญุฉ welcome/preferences
   โ
2. ุญูุธ ูู:
   - localStorage (user.interests)
   - API (/api/user/preferences)
   - ููู JSON (user_preferences.json)
   โ
3. ุตูุญุฉ ุงูููู ุงูุดุฎุตู
   - ุฌูุจ ูู API ุฃููุงู
   - ุฅุฐุง ูุดู: ุฌูุจ ูู localStorage
   - ุฑุจุท ูุน ูุนูููุงุช ุงูุชุตูููุงุช
   - ุนุฑุถ ุจุงูุฃููููุงุช ูุงูุฃููุงู
```

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. **ุชุญุณูู ุงูุฃุฏุงุก**:
   - ุฅุถุงูุฉ caching ููุชุตูููุงุช
   - ุชูููู ุนุฏุฏ ุทูุจุงุช API

2. **ุชุญุณูู ุงูููุซูููุฉ**:
   - ุฅุถุงูุฉ retry logic
   - ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

3. **ุชุญุณูู ูุงุฌูุฉ ุงููุณุชุฎุฏู**:
   - ุฅุถุงูุฉ loading states
   - ุฑุณุงุฆู ุฎุทุฃ ุฃูุถุญ

## โจ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

- โ ุงูุงูุชูุงูุงุช ุชูุญูุธ ูุชุธูุฑ ุจุดูู ุตุญูุญ
- โ ุงูุฃุฒุฑุงุฑ ูุงุถุญุฉ ูุณููุฉ ุงูุงุณุชุฎุฏุงู
- โ ุฏุนู ููุตุงุฏุฑ ุจูุงูุงุช ูุชุนุฏุฏุฉ
- โ ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก 