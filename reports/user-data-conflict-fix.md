# ุฅุตูุงุญ ูุดููุฉ ุชุถุงุฑุจ ุจูุงูุงุช ุงููุณุชุฎุฏู

## ๐จ ุงููุดููุฉ

ูุงู ููุงู ุชุถุงุฑุจ ูู ุจูุงูุงุช ุงููุณุชุฎุฏู ุจูู:
- **ุงูููููุฒ**: ุชุญุชูู ุนูู ุจูุงูุงุช ุงููุณุชุฎุฏู ุงูุญูููู (ุนูู ุงูุญุงุฒูู - ูุฏูุฑ ุงููุธุงู)
- **localStorage**: ูุญุชูู ุนูู ุจูุงูุงุช ูุณุชุฎุฏู ุชุฌุฑูุจู ูุฏููุฉ
- **API `/api/auth/me`**: ูุฌูุจ ุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฃุนุฑุงุถ:
1. ูู ููุญุฉ ุงูุชุญูู ูุธูุฑ: "ุนูู ุงูุญุงุฒูู - ูุฏูุฑ ุงููุธุงู"
2. ุนูุฏ ูุชุญ ุงูููู ุงูุดุฎุตู ูุธูุฑ: ูุณุชุฎุฏู ุชุฌุฑูุจู
3. ุตูุญุงุช "ุงููุฑูู" ู"ุงูุฃุฏูุงุฑ" ูุง ุชูุชุญ ุจุณุจุจ ุชุถุงุฑุจ ุงูุตูุงุญูุงุช

## ๐ ุงูุณุจุจ ุงูุฌุฐุฑู

ูู `contexts/AuthContext.tsx`ุ ูุงู ููุงู ููุทู ููุฑุฃ ูู localStorage ูู "last resort" ุฅุฐุง ูุดู API:

```typescript
// ูุญุงููุฉ ูุฑุงุกุฉ ูู localStorage ูู last resort
if (typeof window !== 'undefined') {
  const localStorageUser = localStorage.getItem('user');
  if (localStorageUser) {
    try {
      const userData = JSON.parse(localStorageUser);
      if (userData && userData.id) {
        setUser(userData); // ููุง ูุงู ูุชู ุชุนููู ุจูุงูุงุช ูุฏููุฉ
        setLoading(false);
        return;
      }
    } catch (error) {
      console.error("ูุดู ูู ูุฑุงุกุฉ localStorage:", error);
    }
  }
}
```

## โ ุงูุญููู ุงููุทุจูุฉ

### 1. ุฅุตูุงุญ AuthContext

**ุงูููู**: `contexts/AuthContext.tsx`

**ุงูุชุบููุฑุงุช**:
- ุฅุฒุงูุฉ ูุฑุงุกุฉ localStorage ูู last resort
- ุงูุงุนุชูุงุฏ ููุท ุนูู API ูุงูููููุฒ
- ุชูุธูู localStorage ุนูุฏ ุนุฏู ูุฌูุฏ ุจูุงูุงุช ูุณุชุฎุฏู ุตุญูุญุฉ

```typescript
// ุฅุฐุง ูู ูุฌุฏ ุฃู ุจูุงูุงุช ูุณุชุฎุฏูุ ุชูุธูู localStorage
if (typeof window !== 'undefined') {
  localStorage.removeItem('user');
  localStorage.removeItem('user_id');
}
```

### 2. ุชุญุณูู ุฏุงูุฉ ุชุณุฌูู ุงูุฎุฑูุฌ

**ุงูููู**: `contexts/AuthContext.tsx`

**ุงูุชุบููุฑุงุช**:
- ุชูุธูู ุดุงูู ูุฌููุน ุจูุงูุงุช ุงููุณุชุฎุฏู
- ุฅุฒุงูุฉ user_preferences ู darkMode
- ุชูุธูู sessionStorage ุจุงููุงูู

```typescript
// ุฅุฒุงูุฉ ูู localStorage ุฃูุถุงู
if (typeof window !== 'undefined') {
  localStorage.removeItem('user');
  localStorage.removeItem('user_id');
  localStorage.removeItem('user_preferences');
  localStorage.removeItem('darkMode');
  sessionStorage.removeItem('user');
  sessionStorage.clear(); // ุชูุธูู ุฌููุน ุจูุงูุงุช ุงูุฌูุณุฉ
}
```

### 3. ุณูุฑูุจุช ุชูุธูู ุงูุจูุงูุงุช

**ุงูููู**: `scripts/clear-user-data.js`

**ุงูุบุฑุถ**: ุชูุธูู ูุฏูู ูุจูุงูุงุช ุงููุณุชุฎุฏู ูู ุงููุชุตูุญ

**ุงูุงุณุชุฎุฏุงู**:
1. ุงูุชุญ Developer Tools (F12)
2. ุงุฐูุจ ุฅูู Console
3. ุงูุณุฎ ูุงูุตู ูุญุชูู ุงูุณูุฑูุจุช
4. ุงุถุบุท Enter
5. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ

## ๐ง ููููุฉ ุงูุชุทุจูู

### ูููุทูุฑ:
1. ุชู ุชุทุจูู ุงูุชุบููุฑุงุช ุนูู ุงูููุฏ
2. ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู ููุชุฃูุฏ ูู ุงูุชุญุฏูุซุงุช

### ูููุณุชุฎุฏู:
1. **ุงูุทุฑููุฉ ุงูุฃููู**: ุชุณุฌูู ุงูุฎุฑูุฌ ูุฅุนุงุฏุฉ ุชุณุฌูู ุงูุฏุฎูู
2. **ุงูุทุฑููุฉ ุงูุซุงููุฉ**: ุชุดุบูู ุณูุฑูุจุช ุงูุชูุธูู ูู console ุงููุชุตูุญ
3. **ุงูุทุฑููุฉ ุงูุซุงูุซุฉ**: ูุณุญ ุจูุงูุงุช ุงููุชุตูุญ (Cache & Cookies)

## ๐งช ุงุฎุชุจุงุฑ ุงูุญู

### ูุจู ุงูุฅุตูุงุญ:
- โ ุชุถุงุฑุจ ูู ุจูุงูุงุช ุงููุณุชุฎุฏู
- โ ุตูุญุงุช ุงููุฑูู ูุงูุฃุฏูุงุฑ ูุง ุชูุชุญ
- โ ุงูููู ุงูุดุฎุตู ูุนุฑุถ ุจูุงูุงุช ุฎุงุทุฆุฉ

### ุจุนุฏ ุงูุฅุตูุงุญ:
- โ ุจูุงูุงุช ูุณุชุฎุฏู ููุญุฏุฉ
- โ ุตูุญุงุช ุงููุฑูู ูุงูุฃุฏูุงุฑ ุชูุชุญ ูููุฏูุฑ
- โ ุงูููู ุงูุดุฎุตู ูุนุฑุถ ุงูุจูุงูุงุช ุงูุตุญูุญุฉ

## ๐ ุงูุชุญูู ูู ุงูุตูุงุญูุงุช

### ูู ุงูููุฏู ููุฑ:
```typescript
const isAdmin = user.is_admin === true || 
               user.role === 'admin' || 
               user.role === 'super_admin';
```

### ูู API `/api/auth/me`:
```typescript
is_admin: user.isAdmin || user.role === 'admin' || user.role === 'super_admin'
```

### ูู useAuth Hook:
```typescript
const isAdmin = isLoggedIn && user ? (user.role === 'admin' || user.role === 'super_admin') : false;
```

## ๐ฏ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

- โ ุชู ุญู ูุดููุฉ ุชุถุงุฑุจ ุจูุงูุงุช ุงููุณุชุฎุฏู
- โ ุตูุญุงุช "ุงููุฑูู" ู"ุงูุฃุฏูุงุฑ" ุชุนูู ูููุฏูุฑ
- โ ุงูููู ุงูุดุฎุตู ูุนุฑุถ ุงูุจูุงูุงุช ุงูุตุญูุญุฉ
- โ ูุธุงู ุงููุตุงุฏูุฉ ูุนูู ุจุดูู ููุญุฏ

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ูุง ุชูู ุจุญุฐู ุงูุณูุฑูุจุช**: ูุฏ ูุญุชุงุฌู ุงููุณุชุฎุฏููู ูู ุงููุณุชูุจู
2. **ุฑุงูุจ ุงูุณุฌูุงุช**: ุชุฃูุฏ ูู ุนุฏู ุธููุฑ ุฃุฎุทุงุก ุฌุฏูุฏุฉ
3. **ุงุฎุชุจุฑ ุนูู ูุชุตูุญุงุช ูุฎุชููุฉ**: ููุชุฃูุฏ ูู ุนูู ุงูุญู ุจุดูู ุดุงูู
4. **ุงุญุชูุธ ุจูุณุฎุฉ ุงุญุชูุงุทูุฉ**: ูู ุงูุจูุงูุงุช ูุจู ุฃู ุชุบููุฑุงุช ูุณุชูุจููุฉ

---
**ุชุงุฑูุฎ ุงูุฅุตูุงุญ**: 2025-01-29  
**ุงููุทูุฑ**: AI Assistant  
**ุงูุญุงูุฉ**: ููุชูู โ 