# ุชูุฑูุฑ ุฅุตูุงุญ ูุดููุฉ "voice_not_found" ูู ูุธุงู ุชูููุฏ ุงูุตูุช

## ๐ ุงูุชุงุฑูุฎ: 17 ููุงูุฑ 2025

## ๐ ูุตู ุงููุดููุฉ

### ุงูุฎุทุฃ ุงูููุจูุบ ุนูู:
```
ุฎุทุฃ ุบูุฑ ูุนุฑูู ูู ุชูููุฏ ุงูุตูุช
app/dashboard/audio-test/page.tsx (94:15) @ generateAudio
```

### ุงูุณุจุจ ุงูุฌุฐุฑู:
```json
{
  "status": 404,
  "statusText": "Not Found",
  "data": {
    "detail": {
      "status": "voice_not_found",
      "message": "A voice with the voice_id g5i5w0JqE7tN1zo8vZPx was not found."
    }
  }
}
```

ูุนุฑู ุงูุตูุช ุงูุนุฑุจู `g5i5w0JqE7tN1zo8vZPx` ูู ูุนุฏ ููุฌูุฏูุง ูู ุฎุฏูุฉ ElevenLabs.

## ๐ง ุงูุญููู ุงููุทุจูุฉ

### 1. ุชุญุฏูุซ ูุนุฑูุงุช ุงูุฃุตูุงุช
```typescript
const VOICE_IDS = {
  // ุงูุฃุตูุงุช ุงูุฅูุฌููุฒูุฉ ุงูุงูุชุฑุงุถูุฉ ุงููุชุงุญุฉ ูุฌุงููุง
  rachel: '21m00Tcm4TlvDq8ikWAM', // Rachel - ูุณุงุฆู ูุงุถุญ
  adam: 'pNInz6obpgDQGcFmaJgB', // Adam - ุฑุฌุงูู ุดุงุจ
  josh: 'TxGEqnHWrfWFTfGW9XjX', // Josh - ุฑุฌุงูู ุนููู
  
  // ุงูุฃุตูุงุช ุงูุนุฑุจูุฉ (ุงุณุชุฎุฏุงู ุงูุฃุตูุงุช ุงูุฅูุฌููุฒูุฉ ูุคูุชูุง)
  arabic_male: 'TxGEqnHWrfWFTfGW9XjX', // Josh ูุจุฏูู ูุคูุช
  arabic_female: '21m00Tcm4TlvDq8ikWAM', // Rachel ูุจุฏูู ูุคูุช
  bradford: 'pNInz6obpgDQGcFmaJgB', // Adam ูุตูุช ุงูุชุฑุงุถู
}
```

### 2. ุขููุฉ Fallback ุงูุชููุงุฆูุฉ
ุนูุฏ ูุดู ุงูุตูุช ุงููุทููุจุ ูุญุงูู ุงููุธุงู ุชููุงุฆููุง ุงุณุชุฎุฏุงู ุตูุช Adam ูุจุฏูู:

```typescript
if (error.response?.status === 404 && error.response?.data?.detail?.status === 'voice_not_found') {
  console.log('โ๏ธ ุงูุตูุช ุงููุทููุจ ุบูุฑ ููุฌูุฏุ ูุญุงููุฉ ุงุณุชุฎุฏุงู ุตูุช ุงุญุชูุงุทู...');
  
  const fallbackVoiceId = VOICE_IDS.adam;
  // ูุญุงููุฉ ุงูุชูููุฏ ุจุงูุตูุช ุงูุงุญุชูุงุทู
  const fallbackResponse = await axios.post(
    `https://api.elevenlabs.io/v1/text-to-speech/${fallbackVoiceId}`,
    // ...
  );
}
```

### 3. ุฅุนุงุฏุฉ ููููุฉ ุงูููุฏ
ุชู ููู ุชุนุฑูู ุงููุชุบูุฑุงุช ุฎุงุฑุฌ try block ูุชููู ูุชุงุญุฉ ูู catch block:

```typescript
export async function POST(req: NextRequest) {
  // ุงููุชุบูุฑุงุช ูุชุงุญุฉ ูู ุฌููุน ุฃูุญุงุก ุงูุฏุงูุฉ
  let body: any;
  let optimizedText: string = '';
  let selectedVoiceId: string = '';
  let apiKey: string | undefined;
  let voice: string = 'bradford';
  let filename: string = 'daily-news';
  let language: string = 'arabic';
  
  try {
    // ุงูููุฏ ุงูุฑุฆูุณู
  } catch (error: any) {
    // ูููู ุงููุตูู ูููุชุบูุฑุงุช ููุง
  }
}
```

### 4. ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงููุบุฉ ุงูุนุฑุจูุฉ:

```typescript
if (error.response?.status === 404) {
  errorMessage = 'ุงูุตูุช ุงููุทููุจ ุบูุฑ ููุฌูุฏ';
  errorDetails = `ูุนุฑู ุงูุตูุช "${selectedVoiceId}" ุบูุฑ ุตุงูุญ ุฃู ุชู ุญุฐูู`;
} else if (error.response?.status === 429) {
  errorMessage = 'ุชุฌุงูุฒุช ุญุฏ ุงูุงุณุชุฎุฏุงู';
  errorDetails = 'ููุฏ ุชุฌุงูุฒุช ุงูุญุฏ ุงููุณููุญ ูู ุงูุทูุจุงุช ุฃู ุงูุฃุญุฑู';
}
```

## ๐ ุงููุชุงุฆุฌ

### โ ุงูุฅูุฌุงุจูุงุช:
1. **ุงูููุซูููุฉ**: ุงููุธุงู ุงูุขู ูุนูู ุจุดูู ููุซูู ูุน ุขููุฉ fallback
2. **ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู**: ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ููููุฏุฉ
3. **ุงูุตูุงูุฉ**: ููุฏ ุฃูุถู ุชูุธูููุง ูุฃุณูู ูู ุงูุตูุงูุฉ

### โ๏ธ ุงูููุงุญุธุงุช:
1. ุงูุฃุตูุงุช ุงูุนุฑุจูุฉ ุงููุฎุตุตุฉ ุชุญุชุงุฌ ูุญุณุงุจ Pro ูู ElevenLabs
2. ูุชู ุงุณุชุฎุฏุงู ุฃุตูุงุช ุฅูุฌููุฒูุฉ ูุจุฏูู ูุคูุช ูููุตูุต ุงูุนุฑุจูุฉ
3. ุฌูุฏุฉ ุงููุทู ุงูุนุฑุจู ูุฏ ุชููู ุฃูู ูุน ุงูุฃุตูุงุช ุงูุฅูุฌููุฒูุฉ

## ๐ ุงูุชูุตูุงุช ุงููุณุชูุจููุฉ

1. **ุงูุญุตูู ุนูู ุญุณุงุจ Pro**:
   - ูููุตูู ูุฃุตูุงุช ุนุฑุจูุฉ ูุฎุตุตุฉ ุนุงููุฉ ุงูุฌูุฏุฉ
   - ุฒูุงุฏุฉ ุญุฏ ุงูุงุณุชุฎุฏุงู ุงูุดูุฑู

2. **ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูุฃุตูุงุช**:
   - ุงูุจุญุซ ุนู ุฃุตูุงุช ุนุฑุจูุฉ ุฌุฏูุฏุฉ ูู ElevenLabs
   - ุงุฎุชุจุงุฑ ุฌูุฏุฉ ูู ุตูุช ูุน ุงููุตูุต ุงูุนุฑุจูุฉ

3. **ุชุญุณูู ุขููุฉ Fallback**:
   - ุฅุถุงูุฉ ูุงุฆูุฉ ุฃุตูุงุช ุงุญุชูุงุทูุฉ ูุชุนุฏุฏุฉ
   - ุงุฎุชูุงุฑ ุงูุตูุช ุงูุงุญุชูุงุทู ุญุณุจ ููุน ุงููุต

## ๐ ุงููููุงุช ุงููุญุฏุซุฉ

1. `app/api/audio/generate/route.ts` - API ุชูููุฏ ุงูุตูุช
2. ุญุฐู `scripts/fix-prisma-for-sqlite.js` - ูู ูุนุฏ ูุทููุจูุง

## ๐ ุงููุฑุงุฌุน

- [ElevenLabs API Documentation](https://docs.elevenlabs.io)
- [GitHub Commit](https://github.com/sabq4org/sabq-ai-cms/commit/a1913d1) 