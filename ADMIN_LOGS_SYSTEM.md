# ูุธุงู ุชุณุฌูู ุงูุฃุญุฏุงุซ ุงูุฃููู - ุณุจู ุงูุฐููุฉ ๐

## ูุธุฑุฉ ุนุงูุฉ
ุชู ุชุทููุฑ ูุธุงู ุชุณุฌูู ุฃุญุฏุงุซ ุฃููู ุดุงูู ูููุตุฉ "ุณุจู ุงูุฐููุฉ" ูุชุชุจุน ููุฑุงูุจุฉ ุฌููุน ุงูุนูููุงุช ุงูุญุณุงุณุฉ ุฏุงุฎู ุงููุธุงู. ูููุฑ ุงููุธุงู ุดูุงููุฉ ูุงููุฉ ููุฏุฑุฉ ุนูู ูุฑุงุฌุนุฉ ุฌููุน ุงูุฃูุดุทุฉ ุงูุฅุฏุงุฑูุฉ.

## ุงููุฏูุฑ ุงููุณุคูู
- **ุงูุงุณู**: ุนูู ุงูุญุงุฒูู
- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**: Ali@alhazmi.org
- **ุงูุฏูุฑ**: ูุฏูุฑ ุงููุธุงู
- **ุงูุตูุงุญูุงุช**: ุตูุงุญูุงุช ูุงููุฉ ููุฑุงุฌุนุฉ ุงูุณุฌูุงุช

## ููููุงุช ุงููุธุงู

### 1. ููู ุชุฎุฒูู ุงูุณุฌูุงุช
- **ุงููุณุงุฑ**: `/data/admin_activity_logs.json`
- **ุงูุจููุฉ**: JSON ูุณูููุฉ ุงููุฑุงุกุฉ ูุงูุชุนุฏูู
- **ุงูุณุฌู ุงูุฃูู**: ุชูุนูู ูุธุงู ุชุณุฌูู ุงูุฃุญุฏุงุซ

### 2. API ุชุณุฌูู ุงูุฃุญุฏุงุซ
- **ุงููุณุงุฑ**: `/api/logs/admin`
- **ุงูุทุฑู**:
  - `GET`: ูุฑุงุกุฉ ุงูุณุฌูุงุช ูุน ุฏุนู ุงูููุชุฑุฉ ูุงูุตูุญุงุช
  - `POST`: ุฅุถุงูุฉ ุณุฌู ุฌุฏูุฏ

#### ูุนุงููุงุช ุงูููุชุฑุฉ (GET):
- `page`: ุฑูู ุงูุตูุญุฉ
- `limit`: ุนุฏุฏ ุงูุณุฌูุงุช ูู ุงูุตูุญุฉ
- `action_type`: ููุน ุงูุนูููุฉ
- `user_id`: ูุนุฑู ุงููุณุชุฎุฏู
- `start_date`: ุชุงุฑูุฎ ุงูุจุฏุงูุฉ
- `end_date`: ุชุงุฑูุฎ ุงูููุงูุฉ

### 3. ุตูุญุฉ ุนุฑุถ ุงูุณุฌูุงุช
- **ุงููุณุงุฑ**: `/dashboard/system/logs`
- **ุงูููุฒุงุช**:
  - ุนุฑุถ ุฌุฏููู ูุน ููุงุชุฑ ูุชูุฏูุฉ
  - ุชุตุฏูุฑ ุงูุจูุงูุงุช ูู CSV
  - ุชุญุฏูุซ ุชููุงุฆู
  - ุชุตููู ุงูุฎุทูุฑุฉ ุจุงูุฃููุงู

### 4. ุฏุงูุฉ ุชุณุฌูู ุงูุฃุญุฏุงุซ
- **ุงูููู**: `/lib/log-activity.ts`
- **ุงูุฏูุงู ุงููุณุงุนุฏุฉ**:
  - `logActivity()`: ุงูุฏุงูุฉ ุงูุฃุณุงุณูุฉ
  - `getCurrentUser()`: ุงูุญุตูู ุนูู ุจูุงูุงุช ุงููุณุชุฎุฏู ุงูุญุงูู
  - `logActions`: ูุฌููุนุฉ ุฏูุงู ุฌุงูุฒุฉ ููุฃุญุฏุงุซ ุงูุดุงุฆุนุฉ

## ุฃููุงุน ุงูุฃุญุฏุงุซ ุงููุณุฌูุฉ

| ููุน ุงูุญุฏุซ | ุงููุตู | ูุณุชูู ุงูุฎุทูุฑุฉ |
|-----------|--------|---------------|
| `login` | ุชุณุฌูู ุฏุฎูู | info |
| `logout` | ุชุณุฌูู ุฎุฑูุฌ | info |
| `create` | ุฅูุดุงุก ูุญุชูู ุฌุฏูุฏ | info |
| `update` | ุชุญุฏูุซ ูุญุชูู | info |
| `delete` | ุญุฐู ูุญุชูู | warning |
| `restore` | ุงุณุชุนุงุฏุฉ ูุญุชูู | info |
| `publish` | ูุดุฑ ูุญุชูู | info |
| `export` | ุชุตุฏูุฑ ุจูุงูุงุช | warning |
| `role_change` | ุชุบููุฑ ุตูุงุญูุงุช | critical |
| `settings_update` | ุชุญุฏูุซ ุฅุนุฏุงุฏุงุช | warning |

## ุจููุฉ ุงูุณุฌู

```json
{
  "id": "log-timestamp-randomstring",
  "user_id": "ูุนุฑู ุงููุณุชุฎุฏู",
  "user_name": "ุงุณู ุงููุณุชุฎุฏู",
  "email": "ุงูุจุฑูุฏ ุงูุฅููุชุฑููู",
  "role": "ุฏูุฑ ุงููุณุชุฎุฏู",
  "action_type": "ููุน ุงูุนูููุฉ",
  "details": "ุชูุงุตูู ุงูุนูููุฉ",
  "target_id": "ูุนุฑู ุงููุฏู (ุงุฎุชูุงุฑู)",
  "target_type": "ููุน ุงููุฏู (ุงุฎุชูุงุฑู)",
  "old_value": "ุงููููุฉ ุงููุฏููุฉ (ุงุฎุชูุงุฑู)",
  "new_value": "ุงููููุฉ ุงูุฌุฏูุฏุฉ (ุงุฎุชูุงุฑู)",
  "ip_address": "ุนููุงู IP",
  "user_agent": "ูุนูููุงุช ุงููุชุตูุญ",
  "created_at": "ุงูุชุงุฑูุฎ ูุงูููุช",
  "severity": "info|warning|critical"
}
```

## ุงูุชูุงูู ูุน ุงูุตูุญุงุช

### 1. ุตูุญุฉ ุฅูุดุงุก ุงูููุงูุงุช
```javascript
// ุนูุฏ ุฅูุดุงุก ููุงู ุฌุฏูุฏ
await logActions.createArticle(userInfo, articleId, title);

// ุนูุฏ ูุดุฑ ุงูููุงู
await logActions.publishArticle(userInfo, articleId, title);
```

### 2. ุตูุญุฉ ุชุญุฑูุฑ ุงูููุงูุงุช
```javascript
// ุนูุฏ ุชุญุฏูุซ ููุงู
await logActions.updateArticle(userInfo, articleId, title);
```

### 3. ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
```javascript
// ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ
await logActions.login(userInfo);
```

## ูุณุชููุงุช ุงูุฎุทูุฑุฉ

### ๐ข Info (ูุนูููุงุช)
- ุชุณุฌูู ุฏุฎูู/ุฎุฑูุฌ
- ุฅูุดุงุก ูุญุชูู
- ูุฑุงุกุฉ ุจูุงูุงุช

### ๐ก Warning (ุชุญุฐูุฑ)
- ุญุฐู ูุญุชูู
- ุชุตุฏูุฑ ุจูุงูุงุช
- ุชุญุฏูุซ ุฅุนุฏุงุฏุงุช

### ๐ด Critical (ุญุฑุฌ)
- ุชุบููุฑ ุตูุงุญูุงุช
- ุญุฐู ูุณุชุฎุฏููู
- ุชุบููุฑุงุช ุนูู ูุณุชูู ุงููุธุงู

## ุงูุฃูุงู ูุงูุฎุตูุตูุฉ

1. **ุงูุชุดููุฑ**: ูุฌุจ ุชุดููุฑ ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ
2. **ุงูุตูุงุญูุงุช**: ููุท ุงููุฏุฑุงุก ูููููู ุงููุตูู ููุณุฌูุงุช
3. **ุงููุณุฎ ุงูุงุญุชูุงุทู**: ูุฌุจ ุนูู ูุณุฎ ุงุญุชูุงุทูุฉ ุฏูุฑูุฉ
4. **ูุฏุฉ ุงูุญูุธ**: ุงูุงุญุชูุงุธ ุจุงูุณุฌูุงุช ููุฏุฉ 90 ููููุง ุนูู ุงูุฃูู

## ุงูุงุณุชุฎุฏุงู

### ุนุฑุถ ุงูุณุฌูุงุช
1. ุงูุชูู ุฅูู: `/dashboard/system/logs`
2. ุงุณุชุฎุฏู ุงูููุงุชุฑ ููุจุญุซ
3. ุงุถุบุท ุนูู "ุชุตุฏูุฑ CSV" ูุชุญููู ุงูุจูุงูุงุช

### ุชุณุฌูู ุญุฏุซ ูุฏููุงู
```javascript
import { logActivity, getCurrentUser } from '@/lib/log-activity';

const userInfo = getCurrentUser();
await logActivity({
  ...userInfo,
  action_type: 'custom',
  details: 'ูุตู ุงูุนูููุฉ',
  severity: 'info'
});
```

## ุงููุชุทูุจุงุช ุงููุณุชูุจููุฉ

1. **ุงูุชูุจููุงุช ุงูููุฑูุฉ**: ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ููุฃุญุฏุงุซ ุงูุญุฑุฌุฉ
2. **ุงูุชูุงุฑูุฑ ุงูุฏูุฑูุฉ**: ุชูุงุฑูุฑ ุฃุณุจูุนูุฉ/ุดูุฑูุฉ
3. **ุงูุชุญูููุงุช ุงููุชูุฏูุฉ**: ุฑุณูู ุจูุงููุฉ ูุฅุญุตุงุฆูุงุช
4. **ุงูุชูุงูู ูุน SIEM**: ุฑุจุท ูุน ุฃูุธูุฉ ุฅุฏุงุฑุฉ ุงูุฃุญุฏุงุซ
5. **ุงูุชุฏููู ุงูุขูู**: ุงูุชุดุงู ุงูุฃููุงุท ุงููุดุจููุฉ

## ุงูุฏุนู ูุงูุตูุงูุฉ

ูููุณุงุนุฏุฉ ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงูู:
- **ุงููุทูุฑ**: ูุฑูู ุณุจู ุงูุชููู
- **ุงูุชูุซูู**: ูุฐุง ุงูููู
- **ุขุฎุฑ ุชุญุฏูุซ**: 2025-01-17

---

ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ ูุฑูู ุณุจู ุงูุฐููุฉ ๐ 