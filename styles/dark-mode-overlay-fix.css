/*
 * 🌙 إصلاح مشكلة الطبقة السوداء في الوضع الليلي
 * ================================================
 * يمنع تطبيق طبقات سوداء متراكمة ويضمن وضع ليلي صحيح
 */

/* منع أي تطبيق مباشر للخلفية السوداء */
html.dark,
body.dark {
  /* إزالة أي خلفية مباشرة قد تكون مطبقة */
  background-color: unset !important;
}

/* ضمان الاعتماد على CSS Variables فقط */
html[data-theme="dark"] {
  background: hsl(var(--bg)) !important;
}

body {
  background: hsl(var(--bg)) !important;
}

/* منع تطبيق كلاس dark على جميع العناصر تلقائياً */
* {
  /* إزالة أي وراثة غير مرغوبة للخلفية */
  background-color: initial;
}

/* التأكد من أن البطاقات والمكونات تستخدم المتغيرات الصحيحة */
.dark .card,
.dark [class*="card"] {
  background: hsl(var(--bg-card)) !important;
  color: hsl(var(--fg)) !important;
}

/* إزالة أي طبقات إضافية */
.dark-mode-element {
  background-color: inherit !important;
}

/* منع الطبقات السوداء المتراكمة */
.dark * {
  background-color: inherit;
}

/* تطبيق الوضع الليلي بطريقة صحيحة للمكونات الرئيسية */
.dark main,
.dark .main-content,
.dark .dashboard-content {
  background: hsl(var(--bg)) !important;
}

/* إصلاح خاص لصفحات لوحة التحكم الحديثة */
.dark .admin-modern-main {
  background: hsl(var(--bg)) !important;
}

/* منع تطبيق خلفية سوداء على العناصر الداخلية */
.dark div:not(.card):not([class*="bg-"]) {
  background-color: transparent !important;
}

/* التأكد من عدم وجود طبقات overlay غير مرغوبة */
.dark::before,
.dark::after {
  display: none !important;
}

/* إصلاح النمط الشبكي في الخلفية */
.dark .manus-layout::before {
  opacity: 0.2 !important;
  background-image: radial-gradient(circle at 1px 1px, hsl(var(--line)) 1px, transparent 0) !important;
}
