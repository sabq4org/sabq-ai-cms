/* 
 * 🌙 نظام الوضع الليلي الموحد - سبق الذكية
 * ==========================================
 * تحديث شامل لدعم الوضع الليلي في جميع أجزاء المشروع
 * النسخة الكاملة + النسخة الخفيفة + لوحة التحكم
 */

/* ===== متغيرات الألوان الأساسية ===== */
:root {
  /* الوضع النهاري - Light Mode */
  --color-bg-base: #ffffff;
  --color-bg-elevated: #f8fafc;
  --color-bg-surface: #f1f5f9;
  --color-bg-muted: #e2e8f0;
  
  --color-text-primary: #0f172a;
  --color-text-secondary: #334155;
  --color-text-tertiary: #64748b;
  --color-text-muted: #94a3b8;
  
  --color-border-base: #e2e8f0;
  --color-border-light: #f1f5f9;
  --color-border-dark: #cbd5e1;
  
  --color-accent-primary: #2563eb;
  --color-accent-hover: #1d4ed8;
  --color-accent-light: #dbeafe;
  
  --color-success: #10b981;
  --color-warning: #f59e0b;
  --color-error: #ef4444;
  --color-info: #3b82f6;
  
  /* ظلال */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-base: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
}

/* الوضع الليلي - Dark Mode */
html.dark,
body.dark,
.dark {
  --color-bg-base: #0f172a;
  --color-bg-elevated: #1e293b;
  --color-bg-surface: #334155;
  --color-bg-muted: #475569;
  
  --color-text-primary: #f1f5f9;
  --color-text-secondary: #cbd5e1;
  --color-text-tertiary: #94a3b8;
  --color-text-muted: #64748b;
  
  --color-border-base: #334155;
  --color-border-light: #475569;
  --color-border-dark: #1e293b;
  
  --color-accent-primary: #3b82f6;
  --color-accent-hover: #60a5fa;
  --color-accent-light: #1e3a8a;
  
  --color-success: #22c55e;
  --color-warning: #fbbf24;
  --color-error: #f87171;
  --color-info: #60a5fa;
  
  /* ظلال أغمق للوضع الليلي */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
  --shadow-base: 0 1px 3px 0 rgb(0 0 0 / 0.4), 0 1px 2px -1px rgb(0 0 0 / 0.3);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.4), 0 2px 4px -2px rgb(0 0 0 / 0.3);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.5), 0 4px 6px -4px rgb(0 0 0 / 0.4);
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.5), 0 8px 10px -6px rgb(0 0 0 / 0.4);
}

/* ===== تطبيق الألوان على العناصر الأساسية ===== */

/* الخلفية الأساسية */
html,
body {
  background-color: var(--color-bg-base);
  color: var(--color-text-primary);
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* النصوص */
.text-primary { color: var(--color-text-primary) !important; }
.text-secondary { color: var(--color-text-secondary) !important; }
.text-tertiary { color: var(--color-text-tertiary) !important; }
.text-muted { color: var(--color-text-muted) !important; }

/* الخلفيات */
.bg-base { background-color: var(--color-bg-base) !important; }
.bg-elevated { background-color: var(--color-bg-elevated) !important; }
.bg-surface { background-color: var(--color-bg-surface) !important; }
.bg-muted { background-color: var(--color-bg-muted) !important; }

/* الحدود */
.border-base { border-color: var(--color-border-base) !important; }
.border-light { border-color: var(--color-border-light) !important; }
.border-dark { border-color: var(--color-border-dark) !important; }

/* ===== الهيدر والنافيجيشن ===== */

/* الهيدر الرئيسي */
header,
.header,
[class*="header"],
[class*="Header"],
nav,
.nav,
[class*="nav"],
[class*="Nav"] {
  background-color: var(--color-bg-elevated);
  border-color: var(--color-border-base);
  color: var(--color-text-primary);
}

/* عناصر القائمة */
.nav-item,
.menu-item,
[class*="nav-item"],
[class*="menu-item"] {
  color: var(--color-text-secondary);
}

.nav-item:hover,
.menu-item:hover,
[class*="nav-item"]:hover,
[class*="menu-item"]:hover {
  color: var(--color-text-primary);
  background-color: var(--color-bg-surface);
}

/* ===== البطاقات والمحتوى ===== */

/* البطاقات */
.card,
[class*="card"],
[class*="Card"],
.block,
[class*="block"],
[class*="Block"] {
  background-color: var(--color-bg-elevated);
  border-color: var(--color-border-base);
  color: var(--color-text-primary);
}

/* بطاقات الأخبار */
[class*="news-card"],
[class*="NewsCard"],
[class*="article-card"],
[class*="ArticleCard"] {
  background-color: var(--color-bg-elevated);
  border-color: var(--color-border-base);
}

[class*="news-card"]:hover,
[class*="NewsCard"]:hover,
[class*="article-card"]:hover,
[class*="ArticleCard"]:hover {
  background-color: var(--color-bg-surface);
  border-color: var(--color-border-dark);
}

/* العناوين داخل البطاقات */
.card h1, .card h2, .card h3, .card h4,
[class*="card"] h1, [class*="card"] h2, [class*="card"] h3, [class*="card"] h4,
[class*="Card"] h1, [class*="Card"] h2, [class*="Card"] h3, [class*="Card"] h4 {
  color: var(--color-text-primary);
}

/* النصوص الثانوية */
.card p, .card span,
[class*="card"] p, [class*="card"] span,
[class*="Card"] p, [class*="Card"] span {
  color: var(--color-text-secondary);
}

/* ===== النماذج والحقول ===== */

/* حقول الإدخال */
input,
textarea,
select,
.input,
.textarea,
.select,
[class*="input"],
[class*="Input"],
[class*="select"],
[class*="Select"] {
  background-color: var(--color-bg-surface);
  border-color: var(--color-border-base);
  color: var(--color-text-primary);
}

input::placeholder,
textarea::placeholder {
  color: var(--color-text-muted);
}

input:focus,
textarea:focus,
select:focus {
  background-color: var(--color-bg-elevated);
  border-color: var(--color-accent-primary);
  outline: none;
}

/* ===== الأزرار ===== */

/* الأزرار الأساسية */
button,
.button,
.btn,
[class*="button"],
[class*="Button"],
[class*="btn"],
[class*="Btn"] {
  transition: all 0.2s ease;
}

/* الزر الأساسي */
.btn-primary,
[class*="btn-primary"],
[class*="Button-primary"] {
  background-color: var(--color-accent-primary);
  color: white;
}

.btn-primary:hover,
[class*="btn-primary"]:hover,
[class*="Button-primary"]:hover {
  background-color: var(--color-accent-hover);
}

/* الأزرار الثانوية */
.btn-secondary,
[class*="btn-secondary"],
[class*="Button-secondary"] {
  background-color: var(--color-bg-surface);
  color: var(--color-text-primary);
  border: 1px solid var(--color-border-base);
}

.btn-secondary:hover,
[class*="btn-secondary"]:hover,
[class*="Button-secondary"]:hover {
  background-color: var(--color-bg-muted);
  border-color: var(--color-border-dark);
}

/* ===== الجداول ===== */

table {
  background-color: var(--color-bg-elevated);
  border-color: var(--color-border-base);
}

th {
  background-color: var(--color-bg-surface);
  color: var(--color-text-primary);
  border-color: var(--color-border-base);
}

td {
  background-color: var(--color-bg-elevated);
  color: var(--color-text-secondary);
  border-color: var(--color-border-light);
}

tr:hover td {
  background-color: var(--color-bg-surface);
}

/* ===== القوائم المنسدلة ===== */

.dropdown,
.menu,
[class*="dropdown"],
[class*="Dropdown"],
[class*="menu"],
[class*="Menu"],
[role="menu"],
[role="listbox"] {
  background-color: var(--color-bg-elevated);
  border-color: var(--color-border-base);
  box-shadow: var(--shadow-lg);
}

.dropdown-item,
.menu-item,
[class*="dropdown-item"],
[class*="menu-item"],
[role="menuitem"],
[role="option"] {
  color: var(--color-text-primary);
}

.dropdown-item:hover,
.menu-item:hover,
[class*="dropdown-item"]:hover,
[class*="menu-item"]:hover,
[role="menuitem"]:hover,
[role="option"]:hover {
  background-color: var(--color-bg-surface);
  color: var(--color-accent-primary);
}

/* ===== الفوتر ===== */

footer,
.footer,
[class*="footer"],
[class*="Footer"] {
  background-color: var(--color-bg-elevated);
  border-top: 1px solid var(--color-border-base);
  color: var(--color-text-secondary);
}

/* ===== المودال والتنبيهات ===== */

.modal,
.dialog,
[class*="modal"],
[class*="Modal"],
[class*="dialog"],
[class*="Dialog"] {
  background-color: var(--color-bg-elevated);
  border-color: var(--color-border-base);
  box-shadow: var(--shadow-xl);
}

.modal-overlay,
[class*="overlay"],
[class*="Overlay"] {
  background-color: rgba(0, 0, 0, 0.5);
}

.dark .modal-overlay,
.dark [class*="overlay"],
.dark [class*="Overlay"] {
  background-color: rgba(0, 0, 0, 0.7);
}

/* ===== التنبيهات والرسائل ===== */

.alert,
.notification,
[class*="alert"],
[class*="Alert"],
[class*="notification"],
[class*="Notification"] {
  background-color: var(--color-bg-surface);
  border-color: var(--color-border-base);
  color: var(--color-text-primary);
}

/* ===== شريط التمرير ===== */

::-webkit-scrollbar {
  width: 12px;
  height: 12px;
}

::-webkit-scrollbar-track {
  background-color: var(--color-bg-surface);
}

::-webkit-scrollbar-thumb {
  background-color: var(--color-bg-muted);
  border-radius: 6px;
}

::-webkit-scrollbar-thumb:hover {
  background-color: var(--color-border-dark);
}

/* ===== الظلال ===== */

.shadow-sm { box-shadow: var(--shadow-sm); }
.shadow { box-shadow: var(--shadow-base); }
.shadow-md { box-shadow: var(--shadow-md); }
.shadow-lg { box-shadow: var(--shadow-lg); }
.shadow-xl { box-shadow: var(--shadow-xl); }

/* ===== تحسينات خاصة ===== */

/* رقم الأخبار العاجلة */
.breaking-news,
[class*="breaking"],
[class*="Breaking"] {
  background-color: rgba(239, 68, 68, 0.1);
  border-color: var(--color-error);
  color: var(--color-error);
}

.dark .breaking-news,
.dark [class*="breaking"],
.dark [class*="Breaking"] {
  background-color: rgba(248, 113, 113, 0.1);
  border-color: var(--color-error);
  color: var(--color-error);
}

/* الأخبار المميزة */
.featured,
[class*="featured"],
[class*="Featured"] {
  background-color: var(--color-bg-elevated);
  border-color: var(--color-accent-light);
}

/* بلوك مقترب */
.muqtarab,
[class*="muqtarab"],
[class*="Muqtarab"] {
  background-color: var(--color-bg-surface);
}

/* التسميات والبادجات */
.label,
.badge,
[class*="label"],
[class*="Label"],
[class*="badge"],
[class*="Badge"] {
  background-color: var(--color-bg-muted);
  color: var(--color-text-primary);
}

/* ===== دعم Tailwind المحسن ===== */

/* تحديث ألوان Tailwind للوضع الليلي */
.dark .bg-white { background-color: var(--color-bg-elevated) !important; }
.dark .bg-gray-50 { background-color: var(--color-bg-surface) !important; }
.dark .bg-gray-100 { background-color: var(--color-bg-muted) !important; }
.dark .bg-gray-200 { background-color: var(--color-border-base) !important; }

.dark .text-gray-900 { color: var(--color-text-primary) !important; }
.dark .text-gray-800 { color: var(--color-text-primary) !important; }
.dark .text-gray-700 { color: var(--color-text-secondary) !important; }
.dark .text-gray-600 { color: var(--color-text-secondary) !important; }
.dark .text-gray-500 { color: var(--color-text-tertiary) !important; }
.dark .text-gray-400 { color: var(--color-text-muted) !important; }

.dark .border-gray-200 { border-color: var(--color-border-base) !important; }
.dark .border-gray-300 { border-color: var(--color-border-light) !important; }

/* ===== الانتقالات السلسة ===== */

/* تطبيق انتقالات على جميع العناصر */
* {
  transition-property: background-color, border-color, color, fill, stroke;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 200ms;
}

/* استثناءات للعناصر التي لا تحتاج انتقالات */
img,
video,
iframe,
canvas,
svg path,
svg circle,
svg rect {
  transition: none !important;
}

/* ===== إصلاحات خاصة ===== */

/* إصلاح لون الخلفية في صفحات معينة */
.dark main,
.dark .main,
.dark [class*="main"],
.dark [class*="Main"] {
  background-color: var(--color-bg-base);
}

/* إصلاح ألوان المكونات المخصصة */
.dark .custom-component {
  background-color: var(--color-bg-elevated);
  color: var(--color-text-primary);
}

/* تأكد من تطبيق الألوان على جميع العناصر */
.dark * {
  border-color: var(--color-border-base);
}

/* إصلاح خاص للوحة التحكم */
.dark .admin-panel,
.dark [class*="admin"],
.dark [class*="Admin"],
.dark [class*="dashboard"],
.dark [class*="Dashboard"] {
  background-color: var(--color-bg-base);
}

/* تحسين ألوان النسخة الخفيفة */
.dark .light-version,
.dark [class*="light"],
.dark [class*="Light"],
.dark .old-style,
.dark [class*="old-style"] {
  background-color: var(--color-bg-base);
}

/* إصلاح أي عنصر قد يكون له خلفية بيضاء صريحة */
.dark .bg-white,
.dark [style*="background-color: white"],
.dark [style*="background-color:#fff"],
.dark [style*="background-color:#ffffff"],
.dark [style*="background-color: #fff"],
.dark [style*="background-color: #ffffff"],
.dark [style*="background-color: rgb(255"],
.dark [style*="background: white"],
.dark [style*="background:#fff"],
.dark [style*="background:#ffffff"],
.dark [style*="background: #fff"],
.dark [style*="background: #ffffff"],
.dark [style*="background: rgb(255"] {
  background-color: var(--color-bg-elevated) !important;
}

/* إصلاح أي عنصر قد يكون له لون نص أسود صريح */
.dark [style*="color: black"],
.dark [style*="color:#000"],
.dark [style*="color:#000000"],
.dark [style*="color: #000"],
.dark [style*="color: #000000"],
.dark [style*="color: rgb(0"] {
  color: var(--color-text-primary) !important;
}

/* التأكد من عمل color-scheme */
html.dark {
  color-scheme: dark;
}

/* دعم المتصفحات القديمة */
@media (prefers-color-scheme: dark) {
  :root:not(.light) {
    --color-bg-base: #0f172a;
    --color-bg-elevated: #1e293b;
    --color-bg-surface: #334155;
    --color-bg-muted: #475569;
    --color-text-primary: #f1f5f9;
    --color-text-secondary: #cbd5e1;
    --color-text-tertiary: #94a3b8;
    --color-text-muted: #64748b;
    --color-border-base: #334155;
    --color-border-light: #475569;
    --color-border-dark: #1e293b;
  }
}
