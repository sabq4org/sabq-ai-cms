#!/bin/bash

# ุณูุฑูุจุช ุชูุธูู ูุฅุนุงุฏุฉ ุชุดุบูู ูุดุฑูุน ุณุจู
echo "๐งน ุชูุธูู ูุดุฑูุน ุณุจู..."

# ุฅููุงู ุฃู ุนูููุงุช Next.js ููุฏ ุงูุชุดุบูู
echo "โน๏ธ  ุฅููุงู ุงูุฎูุงุฏู ุงูุณุงุจูุฉ..."
pkill -f "next dev" 2>/dev/null || true

# ุญุฐู ุงููุฌูุฏุงุช ุงููุคูุชุฉ
echo "๐๏ธ  ุญุฐู ุงููุฌูุฏุงุช ุงููุคูุชุฉ..."
rm -rf .next
rm -rf node_modules/.cache
rm -rf .turbo

# ุญุฐู ูููุงุช ุงูุจูุงุก ุงููุคูุชุฉ
echo "๐ฆ ุญุฐู ูููุงุช ุงูุจูุงุก ุงููุคูุชุฉ..."
rm -rf tsconfig.tsbuildinfo

# ุฅุนุงุฏุฉ ุชุซุจูุช ุงูุชุจุนูุงุช (ุงุฎุชูุงุฑู)
read -p "ูู ุชุฑูุฏ ุฅุนุงุฏุฉ ุชุซุจูุช ุงูุชุจุนูุงุชุ (y/n) " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]
then
    echo "๐ฅ ุฅุนุงุฏุฉ ุชุซุจูุช ุงูุชุจุนูุงุช..."
    rm -rf node_modules
    npm install
fi

# ุชุดุบูู ุงููุดุฑูุน
echo "๐ ุชุดุบูู ูุดุฑูุน ุณุจู..."
npm run dev 