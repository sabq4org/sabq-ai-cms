const { PrismaClient } = require('../lib/generated/prisma');
const prisma = new PrismaClient();

async function addSampleArticles() {
  try {
    console.log('๐ ุจุฏุก ุฅุถุงูุฉ ุงูููุงูุงุช ุงูุชุฌุฑูุจูุฉ...\n');

    // ุฌูุจ ุฃูู ูุณุชุฎุฏู ูุฃูู ุชุตููู
    const firstUser = await prisma.user.findFirst();
    const firstCategory = await prisma.category.findFirst();

    if (!firstUser) {
      console.log('โ ูุง ููุฌุฏ ูุณุชุฎุฏููู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช');
      return;
    }

    if (!firstCategory) {
      console.log('โ ูุง ููุฌุฏ ุชุตูููุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช');
      return;
    }

    const articles = [
      {
        title: 'ุงูุฃููุฑ ูุญูุฏ ุจู ุณููุงู ูุทูู ูุดุฑูุน ูููู ุงูุฌุฏูุฏ',
        content: 'ุฃุนูู ุตุงุญุจ ุงูุณูู ุงููููู ุงูุฃููุฑ ูุญูุฏ ุจู ุณููุงูุ ููู ุงูุนูุฏ ุฑุฆูุณ ูุฌูุณ ุงููุฒุฑุงุกุ ุนู ุฅุทูุงู ูุดุฑูุน ุฌุฏูุฏ ุถูู ูุฏููุฉ ูููู ููุฏู ุฅูู ุชุนุฒูุฒ ุงูุงูุชุตุงุฏ ุงูุฑููู ูู ุงูููููุฉ. ูุฃุชู ูุฐุง ุงููุดุฑูุน ุถูู ุฑุคูุฉ 2030 ุงูุชู ุชุณุนู ูุชูููุน ูุตุงุฏุฑ ุงูุฏุฎู ูุชุทููุฑ ุงููุทุงุนุงุช ุบูุฑ ุงูููุทูุฉ.',
        excerpt: 'ุฅุทูุงู ูุดุฑูุน ุฌุฏูุฏ ุถูู ูุฏููุฉ ูููู ูุชุนุฒูุฒ ุงูุงูุชุตุงุฏ ุงูุฑููู',
        status: 'published',
        featured: true,
        breaking: true
      },
      {
        title: 'ุงูููููุฉ ุชุญูู ุฅูุฌุงุฒุงู ุฌุฏูุฏุงู ูู ูุฌุงู ุงูุทุงูุฉ ุงููุชุฌุฏุฏุฉ',
        content: 'ุญููุช ุงูููููุฉ ุงูุนุฑุจูุฉ ุงูุณุนูุฏูุฉ ุฅูุฌุงุฒุงู ุฌุฏูุฏุงู ูู ูุฌุงู ุงูุทุงูุฉ ุงููุชุฌุฏุฏุฉ ุจุงูุชุชุงุญ ุฃูุจุฑ ูุญุทุฉ ููุทุงูุฉ ุงูุดูุณูุฉ ูู ุงูุดุฑู ุงูุฃูุณุท. ุชุจูุบ ูุฏุฑุฉ ุงููุญุทุฉ 2 ุฌูุฌุงูุงุช ูุณุชููุฑ ุงูุทุงูุฉ ุงููุธููุฉ ูุฃูุซุฑ ูู ููููู ููุฒู.',
        excerpt: 'ุงูุชุชุงุญ ุฃูุจุฑ ูุญุทุฉ ููุทุงูุฉ ุงูุดูุณูุฉ ูู ุงูุดุฑู ุงูุฃูุณุท',
        status: 'published',
        featured: false,
        breaking: false
      },
      {
        title: 'ุงูุทูุงู ููุณู ุงูุฑูุงุถ 2025 ุจูุนุงููุงุช ูููุฒุฉ',
        content: 'ุงูุทูู ููุณู ุงูุฑูุงุถ 2025 ุจูุนุงููุงุช ุชุฑููููุฉ ูุซูุงููุฉ ูุชููุนุฉ ุชุณุชูุฑ ููุฏุฉ 5 ุฃุดูุฑ. ูุชุถูู ุงูููุณู ุฃูุซุฑ ูู 500 ูุนุงููุฉ ูู ูุฎุชูู ุฃูุญุงุก ุงูุนุงุตูุฉุ ูุน ูุดุงุฑูุฉ ูุฌูู ุนุงููููู ูุนุฑูุถ ุญุตุฑูุฉ.',
        excerpt: 'ููุณู ุงูุฑูุงุถ ูุนูุฏ ุจู 500 ูุนุงููุฉ ุชุฑููููุฉ ูุซูุงููุฉ',
        status: 'published',
        featured: true,
        breaking: false
      },
      {
        title: 'ุงูููุงู ูุชุฃูู ูููุงุฆู ูุฃุณ ุงูุนุงูู ููุฃูุฏูุฉ',
        content: 'ุชุฃูู ูุงุฏู ุงูููุงู ุงูุณุนูุฏู ุฅูู ููุงุฆู ูุฃุณ ุงูุนุงูู ููุฃูุฏูุฉ ุจุนุฏ ููุฒู ุนูู ุฑูุงู ูุฏุฑูุฏ ุจูุชูุฌุฉ 2-1 ูู ูุจุงุฑุงุฉ ูุซูุฑุฉ. ุณุฌู ููููุงู ูู ูู ุณุงูู ุงูุฏูุณุฑู ููููุงุฑ ูู ุงูุฏูุงุฆู ุงูุฃุฎูุฑุฉ ูู ุงููุจุงุฑุงุฉ.',
        excerpt: 'ุงูููุงู ูุญูู ุฅูุฌุงุฒุงู ุชุงุฑูุฎูุงู ุจุงูุชุฃูู ูููุงุฆู ูุฃุณ ุงูุนุงูู ููุฃูุฏูุฉ',
        status: 'published',
        featured: true,
        breaking: true
      },
      {
        title: 'ูุฒุงุฑุฉ ุงูุชุนููู ุชุนูู ุนู ุจุฑูุงูุฌ ุฌุฏูุฏ ููุงุจุชุนุงุซ',
        content: 'ุฃุนููุช ูุฒุงุฑุฉ ุงูุชุนููู ุนู ุฅุทูุงู ุจุฑูุงูุฌ ุฌุฏูุฏ ููุงุจุชุนุงุซ ุงูุฎุงุฑุฌู ูุณุชูุฏู 10 ุขูุงู ุทุงูุจ ูุทุงูุจุฉ ูู ุชุฎุตุตุงุช ุงูุชูููุฉ ูุงูุฐูุงุก ุงูุงุตุทูุงุนู. ููุฏู ุงูุจุฑูุงูุฌ ุฅูู ุชุฃููู ุงูููุงุฏุฑ ุงููุทููุฉ ูู ุงููุฌุงูุงุช ุงููุณุชูุจููุฉ.',
        excerpt: 'ุจุฑูุงูุฌ ุงุจุชุนุงุซ ุฌุฏูุฏ ูู 10 ุขูุงู ุทุงูุจ ูู ูุฌุงู ุงูุชูููุฉ',
        status: 'published',
        featured: false,
        breaking: false
      }
    ];

    console.log(`๐ ุณูุชู ุฅุถุงูุฉ ${articles.length} ููุงูุงุช...\n`);

    for (const articleData of articles) {
      try {
        const article = await prisma.article.create({
          data: {
            title: articleData.title,
            slug: generateSlug(articleData.title),
            content: articleData.content,
            excerpt: articleData.excerpt,
            authorId: firstUser.id,
            categoryId: firstCategory.id,
            status: articleData.status,
            featured: articleData.featured,
            breaking: articleData.breaking,
            publishedAt: new Date(),
            views: Math.floor(Math.random() * 1000),
            readingTime: Math.ceil(articleData.content.split(' ').length / 200),
            featuredImage: `https://picsum.photos/800/600?random=${Date.now()}`,
            metadata: {
              seo_title: articleData.title,
              seo_description: articleData.excerpt,
              tags: ['ุฃุฎุจุงุฑ', 'ุงูุณุนูุฏูุฉ', 'ูุญููุฉ']
            }
          }
        });

        console.log(`โ ุชู ุฅุถุงูุฉ: ${article.title}`);
      } catch (error) {
        console.error(`โ ูุดู ูู ุฅุถุงูุฉ ุงูููุงู: ${articleData.title}`, error.message);
      }
    }

    console.log('\nโจ ุชูุช ุฅุถุงูุฉ ุงูููุงูุงุช ุงูุชุฌุฑูุจูุฉ ุจูุฌุงุญ!');
    console.log('๐ ูู ุจุชุญุฏูุซ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ูุฑุคูุฉ ุงูููุงูุงุช');

  } catch (error) {
    console.error('โ ุฎุทุฃ:', error);
  } finally {
    await prisma.$disconnect();
  }
}

function generateSlug(title) {
  return title
    .toLowerCase()
    .replace(/[^\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF\w\s-]/g, '')
    .replace(/\s+/g, '-')
    .replace(/-+/g, '-')
    .trim();
}

addSampleArticles(); 