const { PrismaClient } = require('../lib/generated/prisma');
const prisma = new PrismaClient();

const opinionArticles = [
  {
    title: 'ุฑุคูุฉ 2030: ูุญู ูุณุชูุจู ุฑููู ูุณุชุฏุงู',
    content: 'ูู ุธู ุงูุชุญููุงุช ุงูุฑูููุฉ ุงููุชุณุงุฑุนุฉุ ุชุจุฑุฒ ุฑุคูุฉ ุงูููููุฉ 2030 ูุฎุงุฑุทุฉ ุทุฑูู ูุงุถุญุฉ ูุญู ูุณุชูุจู ูุฌูุน ุจูู ุงูุชูุฏู ุงูุชููู ูุงูุงุณุชุฏุงูุฉ ุงูุจูุฆูุฉ. ูุฐุง ุงูุชุญูู ููุณ ูุฌุฑุฏ ุชุทูุฑ ุชูููุ ุจู ุซูุฑุฉ ุญููููุฉ ูู ุทุฑููุฉ ุชูููุฑูุง ูุนูููุง...',
    excerpt: 'ุชุญููู ุนููู ูุฏูุฑ ุงูุชุญูู ุงูุฑููู ูู ุชุญููู ุฃูุฏุงู ุฑุคูุฉ 2030 ูุจูุงุก ูุณุชูุจู ูุณุชุฏุงู ููุฃุฌูุงู ุงููุงุฏูุฉ',
    author_name: 'ุฏ. ูุญูุฏ ุงูุฃุญูุฏ',
    author_id: '1',
    ai_summary: 'ููุงูุด ุงูููุงู ููู ุชุณุงูู ุงูุชูููุงุช ุงูุฑูููุฉ ูู ุชุญููู ุฃูุฏุงู ุฑุคูุฉ 2030ุ ูุน ุงูุชุฑููุฒ ุนูู ุงูุงุณุชุฏุงูุฉ ูุงูุงุจุชูุงุฑ ูู ุงููุทุงุนุงุช ุงูุญูููุฉ.',
    topic_tags: ['ุฑุคูุฉ 2030', 'ุงูุชุญูู ุงูุฑููู', 'ุงูุงุณุชุฏุงูุฉ', 'ุงูุงุจุชูุงุฑ'],
    reading_time: 7,
    sentiment: 'positive',
    is_featured: true
  },
  {
    title: 'ุฑูุงุฏุฉ ุงูุฃุนูุงู ุงููุณุงุฆูุฉ: ููุฉ ุงูุชุบููุฑ ูู ุงูุงูุชุตุงุฏ ุงูุณุนูุฏู',
    content: 'ุดูุฏุช ุงูุณููุงุช ุงูุฃุฎูุฑุฉ ุทูุฑุฉ ููุญูุธุฉ ูู ุฑูุงุฏุฉ ุงูุฃุนูุงู ุงููุณุงุฆูุฉ ุจุงูููููุฉุ ุญูุซ ุฃุซุจุชุช ุงููุฑุฃุฉ ุงูุณุนูุฏูุฉ ูุฏุฑุชูุง ุนูู ุงูููุงุฏุฉ ูุงูุงุจุชูุงุฑ ูู ูุฎุชูู ุงููุทุงุนุงุช...',
    excerpt: 'ูุตุต ูุฌุงุญ ููููุฉ ูุฑุงุฆุฏุงุช ุฃุนูุงู ุณุนูุฏูุงุช ููุฏู ุงูุชุบููุฑ ููุณุงููู ูู ููู ุงูุงูุชุตุงุฏ ุงููุทูู',
    author_name: 'ุฃ. ูุงุทูุฉ ุงููุตุฑ',
    author_id: 'fatima-alnasr',
    ai_summary: 'ุงุณุชุนุฑุงุถ ูุฅูุฌุงุฒุงุช ุฑุงุฆุฏุงุช ุงูุฃุนูุงู ุงูุณุนูุฏูุงุช ูุฏูุฑูู ูู ุชูููุน ุงูุงูุชุตุงุฏ ูุฎูู ูุฑุต ุนูู ุฌุฏูุฏุฉ.',
    topic_tags: ['ุฑูุงุฏุฉ ุงูุฃุนูุงู', 'ุชูููู ุงููุฑุฃุฉ', 'ุงูุงูุชุตุงุฏ ุงูุณุนูุฏู', 'ุงูุงุจุชูุงุฑ'],
    reading_time: 5,
    sentiment: 'positive',
    podcast_duration: 12
  },
  {
    title: 'ุงูุชูุงุฒูุงุช ุงูุฌููุณูุงุณูุฉ ุงูุฌุฏูุฏุฉ: ุฃูู ุชูู ุงูููููุฉุ',
    content: 'ูู ุนุงูู ูุชุบูุฑ ุชุชุดูู ููู ุชุญุงููุงุช ุฌุฏูุฏุฉ ูุชููุงุฑ ุฃุฎุฑู ูุฏููุฉุ ุชุจุฑุฒ ุงูููููุฉ ุงูุนุฑุจูุฉ ุงูุณุนูุฏูุฉ ููุงุนุจ ูุญูุฑู ูู ุฑุณู ููุงูุญ ุงููุธุงู ุงูุนุงููู ุงูุฌุฏูุฏ...',
    excerpt: 'ุชุญููู ุงุณุชุฑุงุชูุฌู ููููุน ุงูููููุฉ ูู ุฎุฑูุทุฉ ุงูุชูุงุฒูุงุช ุงูุฏูููุฉ ุงูุฌุฏูุฏุฉ ูุฏูุฑูุง ูู ุตูุงุบุฉ ูุณุชูุจู ุงูููุทูุฉ',
    author_name: 'ุฏ. ุนูุฑ ุงูุญุฑุจู',
    author_id: 'omar-alharbi',
    ai_summary: 'ูุญูู ุงูููุงู ุงูุฏูุฑ ุงููุชูุงูู ููููููุฉ ูู ุงูุณูุงุณุฉ ุงูุฏูููุฉ ูููู ุชุณุชุซูุฑ ูููุนูุง ุงูุงุณุชุฑุงุชูุฌู ูุชุนุฒูุฒ ููุงูุชูุง ุงูุนุงูููุฉ.',
    topic_tags: ['ุงูุณูุงุณุฉ ุงูุฏูููุฉ', 'ุงูุฌููุณูุงุณูุฉ', 'ุงูุดุฑู ุงูุฃูุณุท', 'ุงูุฏุจูููุงุณูุฉ'],
    reading_time: 10,
    sentiment: 'analytical',
    is_trending: true
  },
  {
    title: 'ุงููุฏู ุงูุฐููุฉ: ุจูู ุงูุทููุญ ูุงููุงูุน',
    content: 'ูุน ุฅุทูุงู ูุดุงุฑูุน ุถุฎูุฉ ูุซู ูููู ูุงููุฏูุฉุ ุชุชุฌู ุงูููููุฉ ูุญู ุจูุงุก ูุฏู ุงููุณุชูุจู. ููู ูุง ูู ุงูุชุญุฏูุงุช ุงูุญููููุฉ ุงูุชู ุชูุงุฌู ูุฐู ุงููุดุงุฑูุน ุงูุทููุญุฉุ...',
    excerpt: 'ูุธุฑุฉ ููุฏูุฉ ุนูู ูุดุงุฑูุน ุงููุฏู ุงูุฐููุฉ ูู ุงูููููุฉ ูุงูุชุญุฏูุงุช ุงูุชูููุฉ ูุงูุจูุฆูุฉ ุงูุชู ุชูุงุฌููุง',
    author_name: 'ู. ุฎุงูุฏ ุงูุนุชูุจู',
    author_id: '3',
    ai_summary: 'ูุณุชุนุฑุถ ุงูููุงู ุงูุชุญุฏูุงุช ูุงููุฑุต ูู ุจูุงุก ุงููุฏู ุงูุฐููุฉุ ูุน ุงูุชุฑููุฒ ุนูู ุงูุฌูุงูุจ ุงูุชูููุฉ ูุงูุจูุฆูุฉ ูุงูุงุฌุชูุงุนูุฉ.',
    topic_tags: ['ุงููุฏู ุงูุฐููุฉ', 'ูููู', 'ุงูุชุฎุทูุท ุงูุนูุฑุงูู', 'ุงูุงุณุชุฏุงูุฉ'],
    reading_time: 8,
    sentiment: 'mixed'
  },
  {
    title: 'ุงููููุฉ ุงูุซูุงููุฉ ูู ุนุตุฑ ุงูุนูููุฉ: ููู ูุญุงูุธ ุนูู ุชุฑุงุซูุงุ',
    content: 'ูู ุฒูู ุชุฐูุจ ููู ุงูุญุฏูุฏ ุงูุซูุงููุฉุ ูุตุจุญ ุงูุณุคุงู ุงูุฃูุซุฑ ุฅูุญุงุญุงู: ููู ูุญุงูุธ ุนูู ูููุชูุง ุงูุซูุงููุฉ ุฏูู ุฃู ููุนุฒู ุนู ุงูุนุงููุ...',
    excerpt: 'ุชุฃููุงุช ูู ุงูุชุญุฏูุงุช ุงูุชู ุชูุงุฌู ุงููููุฉ ุงูุซูุงููุฉ ุงูุณุนูุฏูุฉ ูุณุจู ุงูุญูุงุธ ุนูููุง ูู ุนุตุฑ ุงูุนูููุฉ',
    author_name: 'ุฏ. ููุฑุง ุงูุณุฏูุฑู',
    author_id: '4',
    ai_summary: 'ููุงูุด ุงูููุงู ุงูุชูุงุฒู ุจูู ุงูุญูุงุธ ุนูู ุงูุชุฑุงุซ ูุงูุงููุชุงุญ ุนูู ุงูุนุงููุ ูุน ุชูุฏูู ุฑุคู ุนูููุฉ ููุญูุงุธ ุนูู ุงููููุฉ ุงูุซูุงููุฉ.',
    topic_tags: ['ุงูุซูุงูุฉ', 'ุงููููุฉ', 'ุงูุนูููุฉ', 'ุงูุชุฑุงุซ'],
    reading_time: 6,
    sentiment: 'neutral',
    audio_url: 'dummy-audio-url'
  }
];

async function addOpinionArticles() {
  try {
    console.log('๐ ุจุฏุก ุฅุถุงูุฉ ููุงูุงุช ุงูุฑุฃู...');
    
    // ุงูุญุตูู ุนูู ุชุตููู ุงูุฑุฃู
    let opinionCategory = await prisma.categories.findFirst({
      where: {
        OR: [
          { slug: 'opinion' },
          { name: 'ุฑุฃู' }
        ]
      }
    });

    // ุฅุฐุง ูู ููู ููุฌูุฏุงูุ ูู ุจุฅูุดุงุฆู
    if (!opinionCategory) {
      console.log('๐ ุฅูุดุงุก ุชุตููู ุงูุฑุฃู...');
      opinionCategory = await prisma.categories.create({
        data: {
          id: crypto.randomUUID(),
          name: 'ุฑุฃู',
          slug: 'opinion',
          description: 'ููุงูุงุช ุงูุฑุฃู ูุงูุชุญูููุงุช ูู ูุจุงุฑ ุงููุชุงุจ ูุงููููุฑูู',
          color: '#8B5CF6',
          icon: '๐ญ',
          display_order: 1,
          is_active: true,
          created_at: new Date(),
          updated_at: new Date()
        }
      });
    }

    console.log('โ ุชุตููู ุงูุฑุฃู ุฌุงูุฒ:', opinionCategory.id);

    // ุฅุถุงูุฉ ุงูููุงูุงุช
    for (const article of opinionArticles) {
      const articleId = crypto.randomUUID();
      const slug = article.title.toLowerCase()
        .replace(/[^\u0600-\u06FF\w\s-]/g, '')
        .replace(/\s+/g, '-')
        .replace(/-+/g, '-')
        .trim();

      const newArticle = await prisma.articles.create({
        data: {
          id: articleId,
          title: article.title,
          slug: slug,
          content: article.content,
          excerpt: article.excerpt,
          category_id: opinionCategory.id,
          status: 'published',
          author_id: article.author_id || 'default-author',
          featured_image: `https://source.unsplash.com/800x400/?${encodeURIComponent(article.topic_tags[0])},arabic`,
          metadata: {
            author_name: article.author_name,
            ai_summary: article.ai_summary,
            topic_tags: article.topic_tags,
            sentiment: article.sentiment,
            podcast_duration: article.podcast_duration,
            audio_url: article.audio_url
          },
          reading_time: article.reading_time,
          views: Math.floor(Math.random() * 10000) + 1000,
          featured: article.is_featured || false,
          published_at: new Date(Date.now() - Math.random() * 7 * 24 * 60 * 60 * 1000), // ุขุฎุฑ 7 ุฃูุงู
          created_at: new Date(),
          updated_at: new Date()
        }
      });

      console.log(`โ ุชู ุฅุถุงูุฉ ููุงู: ${article.title}`);
    }

    console.log('๐ ุชู ุฅุถุงูุฉ ุฌููุน ููุงูุงุช ุงูุฑุฃู ุจูุฌุงุญ!');
  } catch (error) {
    console.error('โ ุฎุทุฃ ูู ุฅุถุงูุฉ ููุงูุงุช ุงูุฑุฃู:', error);
  } finally {
    await prisma.$disconnect();
  }
}

// ุชุดุบูู ุงูุณูุฑูุจุช
addOpinionArticles(); 