#!/bin/bash

echo "๐งน ุจุฏุก ุชูุธูู ูุดุฑูุน ุณุจู..."
echo "========================="

# ุฅูุดุงุก ูุฌูุฏ ุงููุณุฎ ุงูุงุญุชูุงุทู ุฅู ูู ููู ููุฌูุฏุงู
mkdir -p __dev__/cleanup-$(date +%Y%m%d)

# 1. ุญุฐู ูููุงุช ุงูุณุฌูุงุช
echo "๐ ุญุฐู ูููุงุช ุงูุณุฌูุงุช..."
find . -name "*.log" -not -path "./node_modules/*" -not -path "./__dev__/*" -exec rm -f {} \;

# 2. ุญุฐู ูุฌูุฏุงุช ุงูุจูุงุก ุงููุคูุชุฉ
echo "๐๏ธ ุญุฐู ูุฌูุฏุงุช ุงูุจูุงุก ุงููุคูุชุฉ..."
rm -rf .next .cache .turbo

# 3. ุญุฐู ูููุงุช ุงููุณุฎ ุงูุงุญุชูุงุทู ุงููุฏููุฉ
echo "๐พ ููู ูููุงุช ุงููุณุฎ ุงูุงุญุชูุงุทู..."
find . -name "*.backup*" -not -path "./node_modules/*" -not -path "./__dev__/*" -exec mv {} __dev__/cleanup-$(date +%Y%m%d)/ \; 2>/dev/null

# 4. ุชูุธูู node_modules cache
echo "๐ฆ ุชูุธูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช..."
rm -rf node_modules/.cache

# 5. ุญุฐู ูููุงุช DS_Store
echo "๐๏ธ ุญุฐู ูููุงุช ุงููุธุงู..."
find . -name ".DS_Store" -exec rm -f {} \;

# 6. ุชุดุบูู npm prune
echo "๐ง ุชุญุณูู ุญุฒู npm..."
npm prune --production=false

# 7. ุนุฑุถ ุญุฌู ุงููุดุฑูุน
echo ""
echo "๐ ุฅุญุตุงุฆูุงุช ุงููุดุฑูุน:"
echo "===================="
echo "ุญุฌู ุงููุดุฑูุน ุงูููู: $(du -sh . | cut -f1)"
echo "ุญุฌู node_modules: $(du -sh node_modules 2>/dev/null | cut -f1 || echo '0')"
echo "ุนุฏุฏ ุงููููุงุช: $(find . -type f -not -path "./node_modules/*" -not -path "./.git/*" | wc -l)"

echo ""
echo "โ ุชู ุงูุชูุธูู ุจูุฌุงุญ!"
echo "๐ก ูุตูุญุฉ: ุดุบู ูุฐุง ุงูุณูุฑูุจุช ุฃุณุจูุนูุงู ููุญูุงุธ ุนูู ูุธุงูุฉ ุงููุดุฑูุน" 