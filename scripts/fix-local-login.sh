#!/bin/bash

echo "๐ง ุฅุตูุงุญ ูุดููุฉ ุชุณุฌูู ุงูุฏุฎูู ุงููุญูู..."

# 1. ุฅููุงู ุฃู ุนูููุงุช Next.js ููุฏ ุงูุชุดุบูู
echo "๐ ุฅููุงู ุงูุนูููุงุช ุงููุฏููุฉ..."
pkill -f "next dev" 2>/dev/null || true

# 2. ุญุฐู ูููุงุช ุงูุจูุงุก ูุงููุงุด
echo "๐๏ธ  ุชูุธูู ุงููููุงุช ุงููุคูุชุฉ..."
rm -rf .next
rm -rf node_modules/.cache
rm -rf .turbo

# 3. ูุณุญ ุจูุงูุงุช ุงููุชุตูุญ ุงููุญููุฉ
echo "๐งน ุชุนูููุงุช ูุณุญ ุจูุงูุงุช ุงููุชุตูุญ:"
echo "  1. ุงูุชุญ http://localhost:3000 ูู ุงููุชุตูุญ"
echo "  2. ุงุถุบุท F12 ููุชุญ ุฃุฏูุงุช ุงููุทูุฑ"
echo "  3. ุงุฐูุจ ุฅูู ุชุจููุจ Application"
echo "  4. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงูุณุญ:"
echo "     - Local Storage > localhost:3000"
echo "     - Session Storage > localhost:3000"
echo "     - Cookies > localhost:3000"
echo ""

# 4. ุฅุนุงุฏุฉ ุชุซุจูุช ุงูุชุจุนูุงุช (ุงุฎุชูุงุฑู)
read -p "ูู ุชุฑูุฏ ุฅุนุงุฏุฉ ุชุซุจูุช node_modulesุ (y/n) " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
  echo "๐ฆ ุฅุนุงุฏุฉ ุชุซุจูุช ุงูุชุจุนูุงุช..."
  rm -rf node_modules
  npm install
fi

# 5. ุชุดุบูู ุงูุณูุฑูุฑ ุงููุญูู
echo "๐ ุชุดุบูู ุงูุณูุฑูุฑ ุงููุญูู..."
npm run dev 