@tailwind base;
@tailwind components;
@tailwind utilities;

/* استيراد نظام إنفاذ الوضع الليلي */
@import '../styles/dark-mode-enforcer.css';

/* 🎯 تطبيق الخط العربي المعتمد على جميع العناصر */
* {
  font-family: var(--font-ibm-plex-arabic), 'IBM Plex Sans Arabic', 'Tajawal', 'Noto Sans Arabic', system-ui, -apple-system, BlinkMacSystemFont, sans-serif !important;
}

html, body {
  font-family: var(--font-ibm-plex-arabic), 'IBM Plex Sans Arabic', 'Tajawal', 'Noto Sans Arabic', system-ui, -apple-system, BlinkMacSystemFont, sans-serif !important;
  font-feature-settings: 'kern' 1, 'liga' 1, 'clig' 1, 'calt' 1;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

:root {
  --foreground-rgb: 0, 0, 0;
  --background-start-rgb: 214, 219, 220;
  --background-end-rgb: 255, 255, 255;
  
  /* خلفية الموقع الموحدة */
  --site-bg: #ffffff;
  --site-bg-dark: #111827;
  
  /* نظام الألوان المتغيرة - الألوان الافتراضية (بلا لون) */
  --theme-primary: #6b7280;
  --theme-secondary: #9ca3af;
  --theme-primary-rgb: 107 114 128;
  --theme-primary-hover: #4b5563;
  --theme-primary-light: rgba(107, 114, 128, 0.1);
  --theme-primary-lighter: rgba(107, 114, 128, 0.05);
}

/* نظام الألوان المتغيرة - مجموعة الألوان المختلفة */
[data-theme="blue"] {
  --theme-primary: #3b82f6;
  --theme-secondary: #2563eb;
  --theme-primary-rgb: 59 130 246;
  --theme-primary-hover: #2563eb;
  --theme-primary-light: rgba(59, 130, 246, 0.1);
  --theme-primary-lighter: rgba(59, 130, 246, 0.05);
}

[data-theme="green"] {
  --theme-primary: #10b981;
  --theme-secondary: #059669;
  --theme-primary-rgb: 16 185 129;
  --theme-primary-hover: #059669;
  --theme-primary-light: rgba(16, 185, 129, 0.1);
  --theme-primary-lighter: rgba(16, 185, 129, 0.05);
}

[data-theme="purple"] {
  --theme-primary: #8b5cf6;
  --theme-secondary: #7c3aed;
  --theme-primary-rgb: 139 92 246;
  --theme-primary-hover: #7c3aed;
  --theme-primary-light: rgba(139, 92, 246, 0.1);
  --theme-primary-lighter: rgba(139, 92, 246, 0.05);
}

[data-theme="pink"] {
  --theme-primary: #ec4899;
  --theme-secondary: #db2777;
  --theme-primary-rgb: 236 72 153;
  --theme-primary-hover: #db2777;
  --theme-primary-light: rgba(236, 72, 153, 0.1);
  --theme-primary-lighter: rgba(236, 72, 153, 0.05);
}

[data-theme="orange"] {
  --theme-primary: #f59e0b;
  --theme-secondary: #d97706;
  --theme-primary-rgb: 245 158 11;
  --theme-primary-hover: #d97706;
  --theme-primary-light: rgba(245, 158, 11, 0.1);
  --theme-primary-lighter: rgba(245, 158, 11, 0.05);
}

[data-theme="red"] {
  --theme-primary: #ef4444;
  --theme-secondary: #dc2626;
  --theme-primary-rgb: 239 68 68;
  --theme-primary-hover: #dc2626;
  --theme-primary-light: rgba(239, 68, 68, 0.1);
  --theme-primary-lighter: rgba(239, 68, 68, 0.05);
}

/* Category pill styles - متوافقة مع نظام الألوان الجديد */
.category-pill {
  display: inline-flex !important;
  align-items: center !important;
  border-radius: 9999px !important;
  padding: 0.25rem 0.625rem !important;
  font-size: 0.75rem !important;
  font-weight: 500 !important;
  background-color: var(--theme-primary-light) !important;
  color: var(--theme-primary) !important;
  border: 1px solid rgba(var(--theme-primary-rgb), 0.2) !important;
  transition: all 0.3s ease !important;
}

.category-pill:hover {
  background-color: rgba(var(--theme-primary-rgb), 0.2) !important;
  border-color: rgba(var(--theme-primary-rgb), 0.3) !important;
}

/* Dark mode category pill */
.dark .category-pill {
  background-color: rgba(var(--theme-primary-rgb), 0.15) !important;
  color: var(--theme-primary) !important;
  border-color: rgba(var(--theme-primary-rgb), 0.25) !important;
}

/* Theme light background for hover effects */
.bg-theme-light {
  background-color: var(--theme-primary-lighter) !important;
}

.group:hover .bg-theme-light {
  background-color: var(--theme-primary-light) !important;
}

/* Dark mode theme light background */
.dark .bg-theme-light {
  background-color: rgba(var(--theme-primary-rgb), 0.08) !important;
}

.dark .group:hover .bg-theme-light {
  background-color: rgba(var(--theme-primary-rgb), 0.12) !important;
}

/* Muted foreground text colors */
.text-muted-foreground {
  color: #6b7280; /* gray-500 */
}

.dark .text-muted-foreground {
  color: #9ca3af; /* gray-400 */
}

/* Stronger hover effect for debugging */
.group:hover .group-hover\:bg-theme-light {
  background-color: rgba(var(--theme-primary-rgb, 59 130 246), 0.1) !important;
}

.dark .group:hover .group-hover\:bg-theme-light {
  background-color: rgba(var(--theme-primary-rgb, 59 130 246), 0.15) !important;
}

/* مقترب: إزالة تأثيرات الروابط والأيقونات لتطابق بطاقات الأخبار */
.muqtarab-card-container a:hover h3,
.muqtarab-card-container .group:hover h3 {
  color: inherit !important;
  transition: none !important;
}

.muqtarab-card-container svg {
  color: inherit !important;
}

/* إزالة تأثير hover الأزرق من الخلفية إذا لم يكن مطلوباً */
.muqtarab-card-container .group:hover .group-hover\:bg-theme-light {
  background-color: transparent !important;
}

/* إزالة جميع transitions من بطاقات مقترب */
.muqtarab-card-container * {
  transition: none !important;
}

* {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

html,
body {
  max-width: 100vw;
  overflow-x: hidden;
}

html {
  background: #f1f1f0 !important;
  background-color: #f1f1f0 !important;
  background-image: none !important;
}

body {
  color: rgb(var(--foreground-rgb));
  /* خلفية المشروع الموحدة - أغمق قليلاً */
  background: #f1f1f0 !important;
  background-color: #f1f1f0 !important;
  background-image: none !important;
  min-height: 100vh;
}

/* Override any other background */
html[data-theme],
body[data-theme],
html[class],
body[class] {
  background: #f1f1f0 !important;
  background-color: #f1f1f0 !important;
}

/* ضمان شفافية المكونات الرئيسية */
.page-wrapper,
.homepage-wrapper,
.content-main-desktop,
.content-main-mobile,
main,
#__next,
#__next > div {
  background: transparent !important;
  background-color: transparent !important;
}

/* تطبيق الخلفية على viewport */
@media screen {
  html {
    background: #f1f1f0 !important;
    background-color: #f1f1f0 !important;
  }
  
  body {
    background: #f1f1f0 !important;
    background-color: #f1f1f0 !important;
  }
}

/* الوضع الداكن */
@media (prefers-color-scheme: dark) {
  html.dark,
  body.dark {
    background: #111827 !important;
    background-color: #111827 !important;
  }
}

/* فصل صريح للوضع الداكن */
.dark html,
.dark body,
html.dark,
body.dark {
  background: #111827 !important;
  background-color: #111827 !important;
}

/* خلفية خاصة لصفحات مقترب - أعلى أولوية */
body:has([data-page="muqtarab"]) {
  background: #f1f1f0 !important;
}

/* خلفية احتياطية عبر المسار */
body:has([data-muqtarab="true"]) {
  background: #f1f1f0 !important;
}

a {
  color: inherit;
  text-decoration: none;
}

/* دعم محسن للوضع الليلي */
html.dark, html[data-theme="dark"] {
  --bg-main: #0f172a;
  --bg-elevated: #1e293b;
  --text-primary: #f8fafc;
  --text-secondary: #cbd5e1;
  --border-color: #334155;
}

html:not(.dark), html[data-theme="light"] {
  --bg-main: #ffffff;
  --bg-elevated: #f8fafc;
  --text-primary: #0f172a;
  --text-secondary: #475569;
  --border-color: #e2e8f0;
}

/* تطبيق الوضع الليلي على العناصر الأساسية */
html.dark body,
html.dark main,
html.dark header,
html.dark nav,
html.dark footer,
html.dark aside,
html.dark section,
html.dark article {
  background-color: var(--bg-main);
  color: var(--text-primary);
}

/* تحسين الروابط في الوضع الليلي */
html.dark a {
  color: #60a5fa;
}

html.dark a:hover {
  color: #93c5fd;
}

/* تحسين الأزرار في الوضع الليلي */
html.dark button {
  background-color: var(--bg-elevated);
  color: var(--text-primary);
  border-color: var(--border-color);
}

/* تحسين النماذج في الوضع الليلي */
html.dark input,
html.dark textarea,
html.dark select {
  background-color: var(--bg-elevated);
  color: var(--text-primary);
  border-color: var(--border-color);
}

html.dark input::placeholder,
html.dark textarea::placeholder {
  color: var(--text-secondary);
}

/* تحسينات إضافية للوضع الليلي - شامل لكل المكونات */

/* ضمان تطبيق الثيم على جميع العناصر */
.dark *,
html.dark *,
html[data-theme="dark"] * {
  transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}

/* تطبيق الثيم على العناصر الأساسية للصفحة */
.dark div,
.dark span,
.dark p,
.dark h1, .dark h2, .dark h3, .dark h4, .dark h5, .dark h6,
.dark li,
.dark td, .dark th,
.dark label,
html.dark div,
html.dark span,
html.dark p,
html.dark h1, html.dark h2, html.dark h3, html.dark h4, html.dark h5, html.dark h6,
html.dark li,
html.dark td, html.dark th,
html.dark label {
  color: var(--text-primary, #f8fafc) !important;
}

/* ضمان خلفية الكونتينرات والكروت */
.dark .container,
.dark .wrapper,
.dark .layout,
.dark .content,
.dark .panel,
.dark .card,
.dark .surface,
.dark .elevated,
.dark .modal,
.dark .popup,
.dark .dropdown,
html.dark .container,
html.dark .wrapper,
html.dark .layout,
html.dark .content,
html.dark .panel,
html.dark .card,
html.dark .surface,
html.dark .elevated,
html.dark .modal,
html.dark .popup,
html.dark .dropdown {
  background-color: var(--bg-main, #0f172a) !important;
  border-color: var(--border-color, #334155) !important;
}

/* إصلاح العناصر التي قد تحتفظ بالألوان الفاتحة */
.dark .bg-white,
.dark .bg-gray-50,
.dark .bg-gray-100,
html.dark .bg-white,
html.dark .bg-gray-50,
html.dark .bg-gray-100 {
  background-color: var(--bg-main, #0f172a) !important;
}

.dark .bg-gray-200,
.dark .bg-gray-300,
html.dark .bg-gray-200,
html.dark .bg-gray-300 {
  background-color: var(--bg-elevated, #1e293b) !important;
}

.dark .text-black,
.dark .text-gray-800,
.dark .text-gray-900,
html.dark .text-black,
html.dark .text-gray-800,
html.dark .text-gray-900 {
  color: var(--text-primary, #f8fafc) !important;
}

.dark .text-gray-600,
.dark .text-gray-700,
html.dark .text-gray-600,
html.dark .text-gray-700 {
  color: var(--text-secondary, #cbd5e1) !important;
}

.dark .border-gray-200,
.dark .border-gray-300,
.dark .border-gray-400,
html.dark .border-gray-200,
html.dark .border-gray-300,
html.dark .border-gray-400 {
  border-color: var(--border-color, #334155) !important;
}

/* تحسين الأزرار والعناصر التفاعلية */
.dark button:not(.btn-primary):not([class*="bg-blue"]):not([class*="bg-green"]):not([class*="bg-red"]),
html.dark button:not(.btn-primary):not([class*="bg-blue"]):not([class*="bg-green"]):not([class*="bg-red"]) {
  background-color: var(--bg-elevated, #1e293b) !important;
  color: var(--text-primary, #f8fafc) !important;
  border-color: var(--border-color, #334155) !important;
}

/* تحسين النماذج */
.dark input[type="text"],
.dark input[type="email"],
.dark input[type="password"],
.dark input[type="search"],
.dark input[type="url"],
.dark input[type="tel"],
.dark input[type="number"],
.dark textarea,
.dark select,
html.dark input[type="text"],
html.dark input[type="email"],
html.dark input[type="password"],
html.dark input[type="search"],
html.dark input[type="url"],
html.dark input[type="tel"],
html.dark input[type="number"],
html.dark textarea,
html.dark select {
  background-color: var(--bg-elevated, #1e293b) !important;
  color: var(--text-primary, #f8fafc) !important;
  border-color: var(--border-color, #334155) !important;
}

.dark input::placeholder,
.dark textarea::placeholder,
html.dark input::placeholder,
html.dark textarea::placeholder {
  color: var(--text-secondary, #cbd5e1) !important;
  opacity: 0.7;
}

/* تحسين الجداول */
.dark table,
html.dark table {
  background-color: var(--bg-main, #0f172a) !important;
  color: var(--text-primary, #f8fafc) !important;
}

.dark th,
html.dark th {
  background-color: var(--bg-elevated, #1e293b) !important;
  color: var(--text-primary, #f8fafc) !important;
  border-color: var(--border-color, #334155) !important;
}

.dark td,
html.dark td {
  border-color: var(--border-color, #334155) !important;
  color: var(--text-primary, #f8fafc) !important;
}

/* تحسين التمرير والحدود */
.dark ::-webkit-scrollbar,
html.dark ::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.dark ::-webkit-scrollbar-track,
html.dark ::-webkit-scrollbar-track {
  background: var(--bg-elevated, #1e293b);
}

.dark ::-webkit-scrollbar-thumb,
html.dark ::-webkit-scrollbar-thumb {
  background: var(--border-color, #334155);
  border-radius: 4px;
}

.dark ::-webkit-scrollbar-thumb:hover,
html.dark ::-webkit-scrollbar-thumb:hover {
  background: #475569;
}

/* إصلاح النصوص المخفية أو الباهتة */
.dark .opacity-60,
.dark .opacity-70,
.dark .opacity-80,
html.dark .opacity-60,
html.dark .opacity-70,
html.dark .opacity-80 {
  color: var(--text-secondary, #cbd5e1) !important;
}

/* ضمان أن العناصر الأساسية تأخذ الثيم الصحيح */
html.dark,
html.dark body,
.dark {
  background-color: var(--bg-main, #0f172a) !important;
  color: var(--text-primary, #f8fafc) !important;
}

/* مكونات إدارية خاصة */
.dark .admin,
.dark .dashboard,
html.dark .admin,
html.dark .dashboard {
  background-color: var(--bg-main, #0f172a) !important;
}

.dark .admin *,
.dark .dashboard *,
html.dark .admin *,
html.dark .dashboard * {
  color: var(--text-primary, #f8fafc) !important;
}

/* إصلاح مكونات خاصة قد تتضارب مع الثيم */
.dark [class*="bg-"]:not([class*="bg-blue"]):not([class*="bg-green"]):not([class*="bg-red"]):not([class*="bg-yellow"]):not([class*="bg-purple"]):not([class*="bg-pink"]):not([class*="bg-indigo"]):not([class*="bg-orange"]),
html.dark [class*="bg-"]:not([class*="bg-blue"]):not([class*="bg-green"]):not([class*="bg-red"]):not([class*="bg-yellow"]):not([class*="bg-purple"]):not([class*="bg-pink"]):not([class*="bg-indigo"]):not([class*="bg-orange"]) {
  background-color: var(--bg-elevated, #1e293b) !important;
}

/* تصميم النسخة الخفيفة المعتمد - Old Style News Block */

.old-style-news-block {
  width: 100%;
  margin-bottom: 32px;
}

/* رأس القسم */
.old-style-news-header {
  margin-bottom: 24px;
  position: relative;
}

.old-style-news-title {
  font-size: 24px;
  font-weight: 700;
  color: #1a1a1a;
  margin: 0 0 8px 0;
  padding-right: 12px;
  position: relative;
}

.old-style-news-title::before {
  content: '';
  position: absolute;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 4px;
  height: 24px;
  background: #3b82f6;
  border-radius: 2px;
}

/* شبكة الأخبار */
.old-style-news-grid {
  display: grid;
  gap: 20px;
}

/* بطاقة الخبر - تصميم بسيط بدون إطارات */
.old-style-news-card {
  background: transparent;
  border: none;
  border-radius: 0;
  overflow: visible;
  transition: all 0.3s ease;
  text-decoration: none;
  color: inherit;
  display: block;
  box-shadow: none;
}

.old-style-news-card:hover {
  transform: translateY(-2px);
}

/* حاوي الصورة الصغيرة */
.old-style-news-image-container {
  position: relative;
  width: 100%;
  height: 200px;
  overflow: hidden;
  background: #f3f4f6;
  border-radius: 8px;
  margin-bottom: 12px;
}

.old-style-news-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;
  border-radius: 8px;
}

.old-style-news-card:hover .old-style-news-image {
  transform: scale(1.05);
}

/* محتوى البطاقة - بدون padding */
.old-style-news-content {
  padding: 0;
}

/* الشريط العلوي: ليبل جديد + التاريخ الميلادي */
.old-style-news-top-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}

.old-style-news-badges {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

/* ليبل "جديد" الأخضر مع شعلة النار */
.old-style-news-new-badge,
.recent-news-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  background: #10b981 !important;
  color: white !important;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
}

/* شارة عاجل - أحمر */
.old-style-news-breaking-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  background: #dc2626;
  color: white;
  padding: 4px 12px;
  border-radius: 9999px;
  font-size: 12px;
  font-weight: 800;
  animation: pulse 2s ease-in-out infinite alternate;
}

/* شارة مخصص - أزرق */
.old-style-news-custom-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  background: #7c3aed;
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
}

/* التاريخ الميلادي */
.old-style-news-date-inline {
  font-size: 12px;
  color: #6b7280;
  font-weight: 500;
}

/* عنوان المقال */
.old-style-news-card-title {
  font-size: 16px;
  font-weight: 600;
  line-height: 1.4;
  color: #1f2937;
  margin: 0 0 12px 0;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
}

.old-style-news-card:hover .old-style-news-card-title {
  color: #3b82f6;
}

/* الشريط السفلي: المشاهدات فقط */
.old-style-news-bottom-bar {
  display: flex;
  align-items: center;
  gap: 16px;
  flex-wrap: wrap;
  margin-top: auto;
}

.old-style-news-meta-item {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  color: #9ca3af;
  font-weight: 500;
}

.old-style-icon {
  width: 14px;
  height: 14px;
  stroke-width: 1.5;
}

/* الحالة الفارغة */
.old-style-empty-state {
  text-align: center;
  padding: 48px 20px;
  color: #9ca3af;
  background: #f9fafb;
  border: 1px dashed #d1d5db;
  border-radius: 8px;
}

/* التجاوب مع الأجهزة المختلفة */
@media (max-width: 1024px) {
  .old-style-news-grid {
    grid-template-columns: repeat(2, 1fr) !important;
  }
}

@media (max-width: 768px) {
  .old-style-news-grid {
    grid-template-columns: 1fr !important;
    gap: 16px;
  }
  
  .old-style-news-title {
    font-size: 20px;
  }
  
  .old-style-news-card {
    display: block;
  }
  
  .old-style-news-image-container {
    width: 100%;
    height: 200px;
    margin-bottom: 12px;
  }
  
  .old-style-news-content {
    padding: 0;
  }
  
  .old-style-news-card-title {
    font-size: 15px;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    margin-bottom: 8px;
  }
  
  .old-style-news-bottom-bar {
    margin-top: 8px;
    gap: 12px;
  }
  
  .old-style-news-breaking-badge,
  .old-style-news-custom-badge,
  .recent-news-badge,
  .old-style-news-new-badge {
    font-size: 10px;
    padding: 3px 6px;
  }
}

/* الوضع الليلي */
.dark .old-style-news-card {
  background: transparent;
  border: none;
  color: #f9fafb;
}

.dark .old-style-news-card:hover {
  transform: translateY(-2px);
}

.dark .old-style-news-title {
  color: #f9fafb;
}

.dark .old-style-news-card-title {
  color: #f9fafb;
}

.dark .old-style-news-card:hover .old-style-news-card-title {
  color: #60a5fa;
}

.dark .old-style-news-date-inline,
.dark .old-style-news-meta-item {
  color: #9ca3af;
}

.dark .old-style-empty-state {
  background: #111827;
  border-color: #374151;
  color: #9ca3af;
}

/* تأثيرات النبضة للأخبار العاجلة */
@keyframes pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.4);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(220, 38, 38, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(220, 38, 38, 0);
  }
}