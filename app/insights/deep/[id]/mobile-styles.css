/* تحسينات خاصة للهواتف المحمولة */

/* تحسينات الشاشات الصغيرة */
@media (max-width: 640px) {
  /* تحسين شريط التقدم للموبايل */
  .mobile-progress-bar {
    height: 4px !important;
    top: 0 !important;
  }
  
  .mobile-progress-info {
    font-size: 0.75rem !important;
    padding: 0.25rem 0.5rem !important;
    top: 4px !important;
    right: 8px !important;
  }

  /* تحسين العناصر العائمة للموبايل */
  .mobile-floating-controls {
    bottom: 20px !important;
    right: 10px !important;
    left: 10px !important;
    flex-direction: row !important;
    justify-content: space-between !important;
    padding: 12px !important;
    border-radius: 16px !important;
  }

  /* تحسين لوحة التشغيل الصوتي للموبايل */
  .mobile-audio-controls {
    position: fixed !important;
    bottom: 80px !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    width: calc(100% - 20px) !important;
    max-width: 350px !important;
    padding: 16px !important;
    border-radius: 20px !important;
  }

  .mobile-audio-controls .audio-control-row {
    flex-wrap: wrap !important;
    gap: 8px !important;
  }

  .mobile-audio-controls .play-button {
    width: 48px !important;
    height: 48px !important;
    border-radius: 50% !important;
  }

  .mobile-audio-controls .control-slider {
    flex: 1 !important;
    min-width: 80px !important;
  }

  /* تحسين النصوص للموبايل */
  .mobile-text-optimized {
    font-size: 1rem !important;
    line-height: 1.7 !important;
    letter-spacing: 0.015em !important;
  }

  .mobile-title {
    font-size: 1.5rem !important;
    line-height: 1.4 !important;
    margin-bottom: 1rem !important;
  }

  .mobile-hero-section {
    padding: 1rem !important;
    min-height: auto !important;
  }

  /* تحسين الأزرار للموبايل */
  .mobile-button {
    min-height: 44px !important;
    min-width: 44px !important;
    font-size: 0.875rem !important;
    padding: 0.75rem 1rem !important;
  }

  /* تحسين فهرس المحتويات للموبايل */
  .mobile-toc {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    max-height: 40vh !important;
    border-radius: 20px 20px 0 0 !important;
    transform: translateY(100%) !important;
    transition: transform 0.3s ease !important;
  }

  .mobile-toc.open {
    transform: translateY(0) !important;
  }

  .mobile-toc-trigger {
    position: fixed !important;
    bottom: 140px !important;
    left: 20px !important;
    width: 48px !important;
    height: 48px !important;
    border-radius: 50% !important;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15) !important;
  }

  /* تحسين المحتوى للموبايل */
  .mobile-content {
    padding: 0 1rem !important;
    margin-top: 1rem !important;
  }

  .mobile-content p {
    margin-bottom: 1.25rem !important;
  }

  .mobile-content h2,
  .mobile-content h3 {
    margin-top: 2rem !important;
    margin-bottom: 1rem !important;
    scroll-margin-top: 80px !important;
  }

  /* تحسين الصور للموبايل */
  .mobile-image {
    width: 100% !important;
    height: auto !important;
    border-radius: 12px !important;
    margin: 1rem 0 !important;
  }

  /* تحسين لوحة التحليل للموبايل */
  .mobile-analysis-panel {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    z-index: 9999 !important;
    padding: 1rem !important;
    overflow-y: auto !important;
  }

  .mobile-analysis-content {
    max-width: none !important;
    height: calc(100vh - 2rem) !important;
    border-radius: 16px !important;
  }

  /* تحسين التمرير للموبايل */
  .mobile-smooth-scroll {
    scroll-behavior: smooth !important;
    overflow-x: hidden !important;
  }

  /* تحسين وضع القراءة للموبايل */
  .mobile-reading-mode {
    font-size: 1.125rem !important;
    line-height: 1.8 !important;
    padding: 0 1.5rem !important;
  }

  .mobile-reading-mode h1,
  .mobile-reading-mode h2,
  .mobile-reading-mode h3 {
    font-size: 1.375rem !important;
    margin: 2rem 0 1rem 0 !important;
  }

  /* تحسين الظلال للموبايل */
  .mobile-shadow {
    box-shadow: 0 2px 8px rgba(0,0,0,0.1) !important;
  }

  .dark .mobile-shadow {
    box-shadow: 0 2px 8px rgba(0,0,0,0.3) !important;
  }

  /* إخفاء عناصر غير ضرورية على الموبايل */
  .mobile-hidden {
    display: none !important;
  }

  /* تحسين التباعد للموبايل */
  .mobile-spacing > * + * {
    margin-top: 1rem !important;
  }

  /* تحسين النماذج للموبايل */
  .mobile-form-input {
    font-size: 16px !important; /* لمنع التكبير التلقائي في iOS */
    padding: 12px !important;
    border-radius: 8px !important;
  }

  /* تحسين الروابط للموبايل */
  .mobile-link {
    min-height: 44px !important;
    padding: 8px !important;
    margin: 4px 0 !important;
  }

  /* تحسين الجداول للموبايل */
  .mobile-table {
    font-size: 0.875rem !important;
    overflow-x: auto !important;
  }

  .mobile-table td,
  .mobile-table th {
    padding: 8px 4px !important;
    white-space: nowrap !important;
  }

  /* تحسين القوائم للموبايل */
  .mobile-list {
    padding-right: 1rem !important;
  }

  .mobile-list li {
    margin-bottom: 0.5rem !important;
    line-height: 1.6 !important;
  }
}

/* تحسينات للشاشات الصغيرة جداً */
@media (max-width: 375px) {
  .extra-small-screen .mobile-audio-controls {
    padding: 12px !important;
    bottom: 70px !important;
  }
  
  .extra-small-screen .mobile-floating-controls {
    padding: 8px !important;
    gap: 4px !important;
  }
  
  .extra-small-screen .mobile-content {
    padding: 0 0.75rem !important;
  }
  
  .extra-small-screen .mobile-text-optimized {
    font-size: 0.9375rem !important;
  }
}

/* تحسينات للشاشات الأوسط (تابلت صغير) */
@media (min-width: 641px) and (max-width: 768px) {
  .tablet-optimized .mobile-audio-controls {
    max-width: 400px !important;
  }
  
  .tablet-optimized .mobile-toc {
    max-height: 50vh !important;
  }
  
  .tablet-optimized .mobile-content {
    padding: 0 2rem !important;
  }
}

/* تحسينات اللمس */
@media (hover: none) and (pointer: coarse) {
  .touch-optimized .mobile-button {
    min-height: 48px !important;
    min-width: 48px !important;
  }
  
  .touch-optimized .mobile-link {
    min-height: 48px !important;
    display: flex !important;
    align-items: center !important;
  }
  
  /* تحسين hover للمس */
  .touch-optimized .hover-effect:hover {
    transform: none !important;
  }
  
  .touch-optimized .hover-effect:active {
    transform: scale(0.98) !important;
    transition: transform 0.1s ease !important;
  }
}

/* تحسينات اتجاه الشاشة */
@media (orientation: landscape) and (max-height: 500px) {
  .landscape-mobile .mobile-audio-controls {
    bottom: 10px !important;
    padding: 8px !important;
  }
  
  .landscape-mobile .mobile-floating-controls {
    bottom: 10px !important;
    padding: 8px !important;
  }
  
  .landscape-mobile .mobile-hero-section {
    padding: 0.5rem !important;
  }
}

/* تحسينات الحركة المخفضة */
@media (prefers-reduced-motion: reduce) {
  .reduced-motion * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  .reduced-motion .float-animation {
    animation: none !important;
  }
  
  .reduced-motion .pulse-glow {
    animation: none !important;
  }
}

/* تحسينات التباين العالي */
@media (prefers-contrast: high) {
  .high-contrast .mobile-button {
    border: 2px solid currentColor !important;
  }
  
  .high-contrast .mobile-shadow {
    box-shadow: 0 0 0 2px currentColor !important;
  }
}

/* تحسينات توفير البيانات */
@media (prefers-reduced-data: reduce) {
  .data-saver .mobile-image {
    background: #f3f4f6 !important;
  }
  
  .data-saver .animated-gradient {
    animation: none !important;
    background: linear-gradient(45deg, #667eea, #764ba2) !important;
  }
}
