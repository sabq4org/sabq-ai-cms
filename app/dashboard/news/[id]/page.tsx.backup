'use client';

import React, { useState, useEffect } from 'react';
import { useParams } from 'next/navigation';
import Link from 'next/link';
import { 
  ArrowRight, Edit3, Trash2, Copy, Eye, Calendar, User, MapPin, Clock, 
  Hash, Activity, FileText, Heart, Share2, MessageSquare, Bookmark,
  CheckCircle, AlertTriangle, Flag, BarChart3, Brain, Globe, GitBranch
} from 'lucide-react';

export default function ArticleViewPage() {
  const params = useParams();
  const articleId = params?.id as string;
  const [activeTab, setActiveTab] = useState('content');
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [darkMode, setDarkMode] = useState(false);

  // استرجاع حالة الوضع الليلي من localStorage
  useEffect(() => {
    const savedDarkMode = localStorage.getItem('darkMode');
    if (savedDarkMode !== null) {
      setDarkMode(JSON.parse(savedDarkMode));
    }
  }, []);

  // بيانات المقال - ربط بأول مقال من قائمة الأخبار (A001)
  const articleData = {
    id: articleId,
    title: 'تطوير جديد في تقنيات الذكاء الاصطناعي يحدث نقلة في مجال الصحافة',
    subtitle: 'تقنيات الذكاء الاصطناعي الجديدة تُحدث ثورة في صناعة الإعلام والصحافة الرقمية',
    summary: 'شهدت تقنيات الذكاء الاصطناعي تطوراً مذهلاً يعيد تشكيل مشهد الصحافة والإعلام، مع ظهور أدوات جديدة تساعد في إنتاج المحتوى وتحليل البيانات.',
    author: 'محمد الأحمد',
    authorRole: 'محرر تقني متخصص',
    category: 'التكنولوجيا',
    subCategory: 'ذكاء اصطناعي',
    publishedAt: '2024-03-15T10:30:00Z',
    updatedAt: '2024-03-15T12:45:00Z',
    status: 'published',
    views: 12500,
    tags: ['ذكاء اصطناعي', 'صحافة', 'تكنولوجيا', 'إعلام رقمي', 'ابتكار'],
    location: 'الرياض، السعودية',
    readTime: '4 دقائق',
    wordCount: 632,
    aiQualityScore: 96,
    seoScore: 91,
    engagement: { likes: 284, shares: 156, comments: 73, saves: 42 }
  };

  // الخريطة الزمنية
  const timeline = [
    {
      id: 1,
      title: 'تم إنشاء الخبر',
      user: 'محمد الأحمد',
      userRole: 'محرر تقني',
      timestamp: '2024-03-15T10:30:00Z',
      description: 'إنشاء المسودة الأولى للخبر حول تطوير الذكاء الاصطناعي',
      icon: FileText,
      color: 'text-blue-600',
      bgColor: 'bg-blue-100'
    },
    {
      id: 2,
      title: 'تم تعديل المحتوى',
      user: 'فاطمة السعيد',
      userRole: 'محررة رقمية',
      timestamp: '2024-03-15T12:45:00Z',
      description: 'مراجعة وتحسين المحتوى وإضافة التفاصيل التقنية',
      icon: Edit3,
      color: 'text-orange-600',
      bgColor: 'bg-orange-100'
    },
    {
      id: 3,
      title: 'تم نشر الخبر',
      user: 'أحمد الحربي',
      userRole: 'رئيس قسم التكنولوجيا',
      timestamp: '2024-03-15T12:45:00Z',
      description: 'نشر الخبر على الموقع الرسمي ووسائل التواصل',
      icon: Globe,
      color: 'text-indigo-600',
      bgColor: 'bg-indigo-100'
    }
  ];

  // إصدارات المقال
  const versions = [
    {
      id: 3,
      version: '1.2',
      user: 'أحمد الحربي',
      timestamp: '2024-03-15T12:45:00Z',
      changes: 'نشر الخبر - إصدار نهائي',
      status: 'published',
      isCurrent: true
    },
    {
      id: 2,
      version: '1.1',
      user: 'فاطمة السعيد',
      timestamp: '2024-03-15T12:45:00Z',
      changes: 'مراجعة المحتوى وإضافة التفاصيل التقنية',
      status: 'reviewed'
    },
    {
      id: 1,
      version: '1.0',
      user: 'محمد الأحمد',
      timestamp: '2024-03-15T10:30:00Z',
      changes: 'النسخة الأولى - مسودة أولية حول الذكاء الاصطناعي',
      status: 'draft'
    }
  ];

  // وظائف التنسيق
  const formatDate = (dateString: string) => {
    const date = new Date(dateString);
    return date.toLocaleDateString('ar-SA', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit',
      hour12: true,
      timeZone: 'Asia/Riyadh'
    });
  };

  const formatRelativeTime = (dateString: string) => {
    const date = new Date(dateString);
    const now = new Date();
    const diffInMs = now.getTime() - date.getTime();
    const diffInHours = Math.floor(diffInMs / (1000 * 60 * 60));
    
    if (diffInHours < 1) return 'منذ دقائق';
    if (diffInHours < 24) return `منذ ${diffInHours} ساعة`;
    return `منذ ${Math.floor(diffInHours / 24)} يوم`;
  };

  const handleCopyLink = () => {
    navigator.clipboard.writeText(window.location.href);
    alert('تم نسخ الرابط! 📎');
  };

  // مكون بطاقة الإحصائية الدائرية
  const CircularStatsCard = ({ 
    title, 
    value, 
    subtitle, 
    icon: Icon, 
    bgColor,
    iconColor
  }: {
    title: string;
    value: string;
    subtitle: string;
    icon: any;
    bgColor: string;
    iconColor: string;
  }) => (
    <div className={`rounded-2xl p-6 shadow-sm border transition-colors duration-300 hover:shadow-md ${
      darkMode 
        ? 'bg-gray-800 border-gray-700' 
        : 'bg-white border-gray-100'
    }`}>
      <div className="flex items-center gap-4">
        <div className={`w-12 h-12 ${bgColor} rounded-full flex items-center justify-center`}>
          <Icon className={`w-6 h-6 ${iconColor}`} />
        </div>
        <div className="flex-1">
          <p className={`text-sm mb-1 transition-colors duration-300 ${
            darkMode ? 'text-gray-400' : 'text-gray-500'
          }`}>{title}</p>
          <div className="flex items-baseline gap-2">
            <span className={`text-2xl font-bold transition-colors duration-300 ${
              darkMode ? 'text-white' : 'text-gray-800'
            }`}>{value}</span>
            <span className={`text-sm transition-colors duration-300 ${
              darkMode ? 'text-gray-400' : 'text-gray-500'
            }`}>{subtitle}</span>
          </div>
        </div>
      </div>
    </div>
  );

  return (
    <div className={`p-8 transition-colors duration-300 ${
      darkMode ? 'bg-gray-900' : ''
    }`}>
      {/* عنوان وتعريف الصفحة */}
      <div className="mb-8">
        <div className="flex items-center gap-4 mb-4">
          <Link 
            href="/dashboard/news"
            className={`flex items-center gap-2 px-4 py-2 rounded-xl transition-colors duration-300 ${
              darkMode 
                ? 'text-gray-300 hover:bg-gray-800 border border-gray-700' 
                : 'text-gray-600 hover:bg-gray-50 border border-gray-200'
            }`}
          >
            <ArrowRight className="w-4 h-4" />
            العودة للأخبار
          </Link>
          <div className="flex items-center gap-2">
            <span className="bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-medium">
              منشور
            </span>
            <div className="flex items-center gap-1 text-sm text-gray-600">
              <Eye className="w-4 h-4" />
              {articleData.views.toLocaleString()} مشاهدة
            </div>
          </div>
        </div>
        
        <h1 className={`text-3xl font-bold mb-2 transition-colors duration-300 ${
          darkMode ? 'text-white' : 'text-gray-800'
        }`}>{articleData.title}</h1>
        <p className={`text-lg transition-colors duration-300 ${
          darkMode ? 'text-gray-300' : 'text-gray-600'
        }`}>{articleData.subtitle}</p>
      </div>

      {/* شريط الأدوات */}
      <div className={`rounded-2xl p-4 shadow-sm border mb-8 transition-colors duration-300 ${
        darkMode 
          ? 'bg-gray-800 border-gray-700' 
          : 'bg-white border-gray-100'
      }`}>
        <div className="flex flex-wrap gap-3">
          <button className="px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-colors flex items-center gap-2">
            <Edit3 className="w-4 h-4" />
            تعديل الخبر
          </button>
          <button 
            onClick={() => setShowDeleteModal(true)}
            className="px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors flex items-center gap-2"
          >
            <Trash2 className="w-4 h-4" />
            حذف الخبر
          </button>
          <button 
            onClick={handleCopyLink}
            className={`px-4 py-2 rounded-xl border transition-colors duration-300 flex items-center gap-2 ${
              darkMode 
                ? 'border-gray-600 text-gray-300 hover:bg-gray-700' 
                : 'border-gray-300 text-gray-600 hover:bg-gray-50'
            }`}
          >
            <Copy className="w-4 h-4" />
            نسخ الرابط
          </button>
          <button className={`px-4 py-2 rounded-xl border transition-colors duration-300 flex items-center gap-2 ${
            darkMode 
              ? 'border-gray-600 text-gray-300 hover:bg-gray-700' 
              : 'border-gray-300 text-gray-600 hover:bg-gray-50'
          }`}>
            <Brain className="w-4 h-4" />
            مراجعة AI
          </button>
          <button className={`px-4 py-2 rounded-xl border transition-colors duration-300 flex items-center gap-2 ${
            darkMode 
              ? 'border-gray-600 text-gray-300 hover:bg-gray-700' 
              : 'border-gray-300 text-gray-600 hover:bg-gray-50'
          }`}>
            <BarChart3 className="w-4 h-4" />
            تحليل الأداء
          </button>
        </div>
      </div>

      {/* التبويبات */}
      <div className={`rounded-2xl p-2 shadow-sm border mb-8 transition-colors duration-300 ${
        darkMode 
          ? 'bg-gray-800 border-gray-700' 
          : 'bg-white border-gray-100'
      }`}>
        <div className="flex gap-2">
          {[
            { id: 'content', name: 'المحتوى', icon: FileText },
            { id: 'timeline', name: 'التاريخ والإصدارات', icon: Activity }
          ].map((tab) => {
            const Icon = tab.icon;
            return (
              <button
                key={tab.id}
                onClick={() => setActiveTab(tab.id)}
                className={`flex items-center gap-2 px-6 py-3 rounded-xl font-medium text-sm transition-all duration-300 ${
                  activeTab === tab.id
                    ? 'bg-blue-500 text-white shadow-md'
                    : darkMode
                      ? 'text-gray-300 hover:bg-gray-700'
                      : 'text-gray-600 hover:bg-gray-50'
                }`}
              >
                <Icon className="w-4 h-4" />
                {tab.name}
              </button>
            );
          })}
        </div>
      </div>

      <div className="grid grid-cols-12 gap-8">
        {/* العمود الأيمن - محتوى المقال */}
        <div className="col-span-12 lg:col-span-8 space-y-6">
          {activeTab === 'content' && (
            <div className="space-y-6">
              {/* الملخص */}
              <div className={`rounded-2xl p-6 shadow-sm border transition-colors duration-300 ${
                darkMode 
                  ? 'bg-gray-800 border-gray-700' 
                  : 'bg-white border-gray-100'
              }`}>
                <h3 className={`text-lg font-bold mb-4 transition-colors duration-300 ${
                  darkMode ? 'text-white' : 'text-gray-800'
                }`}>📝 الملخص</h3>
                <div className="bg-blue-50 border-r-4 border-blue-500 p-4 rounded-xl">
                  <p className="text-gray-700 leading-relaxed">{articleData.summary}</p>
                </div>
              </div>

              {/* المحتوى */}
              <div className={`rounded-2xl p-6 shadow-sm border transition-colors duration-300 ${
                darkMode 
                  ? 'bg-gray-800 border-gray-700' 
                  : 'bg-white border-gray-100'
              }`}>
                <h3 className={`text-lg font-bold mb-4 transition-colors duration-300 ${
                  darkMode ? 'text-white' : 'text-gray-800'
                }`}>📖 المحتوى الكامل</h3>
                <div className="prose prose-lg max-w-none" style={{ direction: 'rtl' }}>
                  <p className={`leading-relaxed mb-6 transition-colors duration-300 ${
                    darkMode ? 'text-gray-300' : 'text-gray-700'
                  }`}>
                    شهد قطاع الصحافة والإعلام الرقمي تطوراً مذهلاً مع ظهور تقنيات الذكاء الاصطناعي المتقدمة، والتي باتت تعيد تشكيل طريقة إنتاج ونشر المحتوى الإعلامي. هذه التطورات الجديدة تفتح أفاقاً واسعة أمام الصحفيين والمحررين لتطوير عملهم وتحسين جودة المحتوى المقدم للجمهور.
                  </p>
                  
                  <h3 className={`text-xl font-bold mt-6 mb-4 transition-colors duration-300 ${
                    darkMode ? 'text-white' : 'text-gray-800'
                  }`}>ثورة في إنتاج المحتوى</h3>
                  <p className={`leading-relaxed mb-6 transition-colors duration-300 ${
                    darkMode ? 'text-gray-300' : 'text-gray-700'
                  }`}>
                    تتيح أدوات الذكاء الاصطناعي الجديدة للصحفيين إمكانيات متقدمة في كتابة التقارير، تحليل البيانات، وإنتاج المحتوى المرئي والمسموع. كما تساعد هذه التقنيات في التحقق من المعلومات وكشف الأخبار المزيفة بدقة عالية.
                  </p>
                  
                  <blockquote className="border-r-4 border-blue-500 bg-blue-50 p-4 my-6 rounded-lg">
                    <p className="text-gray-800 italic">
                      "الذكاء الاصطناعي لا يحل محل الصحفي، بل يعزز قدراته ويوفر له أدوات أكثر فعالية لإنتاج محتوى عالي الجودة"
                    </p>
                  </blockquote>
                  
                  <h3 className={`text-xl font-bold mt-6 mb-4 transition-colors duration-300 ${
                    darkMode ? 'text-white' : 'text-gray-800'
                  }`}>التأثير على مستقبل الصحافة</h3>
                  <p className={`leading-relaxed mb-6 transition-colors duration-300 ${
                    darkMode ? 'text-gray-300' : 'text-gray-700'
                  }`}>
                    تشير الدراسات إلى أن استخدام الذكاء الاصطناعي في الصحافة سيؤدي إلى تحسن كبير في سرعة إنتاج الأخبار ودقتها، مع إمكانية تخصيص المحتوى وفقاً لاهتمامات القراء المختلفة.
                  </p>
                  
                  <h3 className={`text-xl font-bold mt-6 mb-4 transition-colors duration-300 ${
                    darkMode ? 'text-white' : 'text-gray-800'
                  }`}>التحديات والفرص</h3>
                  <p className={`leading-relaxed transition-colors duration-300 ${
                    darkMode ? 'text-gray-300' : 'text-gray-700'
                  }`}>
                    رغم الفوائد الكبيرة، تطرح هذه التقنيات تحديات جديدة تتعلق بالأخلاقيات المهنية والحاجة لتدريب الصحفيين على استخدام هذه الأدوات بفعالية. إلا أن الفرص المتاحة تفوق التحديات بكثير، مما يبشر بمستقبل مشرق للصحافة الرقمية.
                  </p>
                </div>
              </div>
            </div>
          )}

          {activeTab === 'timeline' && (
            <div className="space-y-6">
              {/* الخريطة الزمنية */}
              <div className={`rounded-2xl p-6 shadow-sm border transition-colors duration-300 ${
                darkMode 
                  ? 'bg-gray-800 border-gray-700' 
                  : 'bg-white border-gray-100'
              }`}>
                <h3 className={`text-lg font-bold mb-6 transition-colors duration-300 ${
                  darkMode ? 'text-white' : 'text-gray-800'
                }`}>⏳ الخريطة الزمنية للمقال</h3>
                <div className="space-y-4">
                  {timeline.map((event, index) => {
                    const Icon = event.icon;
                    return (
                      <div key={event.id} className="relative">
                        {index !== timeline.length - 1 && (
                          <div className="absolute right-6 top-12 w-0.5 h-16 bg-gray-200"></div>
                        )}
                        <div className="flex items-start gap-4">
                          <div className={`w-12 h-12 ${event.bgColor} rounded-full flex items-center justify-center flex-shrink-0`}>
                            <Icon className={`w-5 h-5 ${event.color}`} />
                          </div>
                          <div className="flex-1 min-w-0">
                            <div className="flex items-center justify-between mb-1">
                              <h4 className={`font-semibold transition-colors duration-300 ${
                                darkMode ? 'text-white' : 'text-gray-900'
                              }`}>{event.title}</h4>
                              <span className="text-xs text-gray-500">{formatRelativeTime(event.timestamp)}</span>
                            </div>
                            <p className={`text-sm mb-1 transition-colors duration-300 ${
                              darkMode ? 'text-gray-400' : 'text-gray-600'
                            }`}>{event.description}</p>
                            <div className="flex items-center gap-2 text-xs text-gray-500">
                              <span>{event.user}</span>
                              <span>•</span>
                              <span>{event.userRole}</span>
                              <span>•</span>
                              <span>{formatDate(event.timestamp)}</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    );
                  })}
                </div>
              </div>

              {/* إصدارات المقال */}
              <div className={`rounded-2xl p-6 shadow-sm border transition-colors duration-300 ${
                darkMode 
                  ? 'bg-gray-800 border-gray-700' 
                  : 'bg-white border-gray-100'
              }`}>
                <h3 className={`text-lg font-bold mb-6 transition-colors duration-300 ${
                  darkMode ? 'text-white' : 'text-gray-800'
                }`}>🔄 إصدارات المقال</h3>
                <div className="space-y-3">
                  {versions.map((version) => (
                    <div 
                      key={version.id}
                      className={`p-4 rounded-xl border transition-all duration-200 hover:shadow-md ${
                        version.isCurrent 
                          ? 'border-blue-200 bg-blue-50' 
                          : darkMode
                            ? 'border-gray-600 bg-gray-700 hover:border-gray-500'
                            : 'border-gray-200 bg-white hover:border-gray-300'
                      }`}
                    >
                      <div className="flex items-center justify-between">
                        <div className="flex items-center gap-3">
                          <div className={`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${
                            version.isCurrent ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-600'
                          }`}>
                            {version.version}
                          </div>
                          <div>
                            <div className="flex items-center gap-2">
                              <span className={`font-medium transition-colors duration-300 ${
                                darkMode ? 'text-white' : 'text-gray-900'
                              }`}>{version.changes}</span>
                              {version.isCurrent && (
                                <span className="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">
                                  الحالي
                                </span>
                              )}
                            </div>
                            <div className={`text-sm transition-colors duration-300 ${
                              darkMode ? 'text-gray-400' : 'text-gray-600'
                            }`}>
                              {version.user} • {formatDate(version.timestamp)}
                            </div>
                          </div>
                        </div>
                        <div className="flex items-center gap-2">
                          <span className={`text-xs px-2 py-1 rounded-full ${
                            version.status === 'published' ? 'bg-green-100 text-green-800' :
                            version.status === 'reviewed' ? 'bg-blue-100 text-blue-800' :
                            'bg-gray-100 text-gray-800'
                          }`}>
                            {version.status === 'published' ? 'منشور' :
                             version.status === 'reviewed' ? 'مُراجع' : 'مسودة'}
                          </span>
                          {!version.isCurrent && (
                            <button className="px-3 py-1 text-sm bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-colors">
                              استرجاع
                            </button>
                          )}
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          )}
        </div>

        {/* العمود الأيسر - معلومات المقال */}
        <div className="col-span-12 lg:col-span-4 space-y-6">
          {/* معلومات أساسية */}
          <div className={`rounded-2xl p-6 shadow-sm border transition-colors duration-300 ${
            darkMode 
              ? 'bg-gray-800 border-gray-700' 
              : 'bg-white border-gray-100'
          }`}>
            <h2 className={`text-xl font-bold mb-6 transition-colors duration-300 ${
              darkMode ? 'text-white' : 'text-gray-800'
            }`}>📄 معلومات المقال</h2>
            
            {/* معلومات الكاتب */}
            <div className="flex items-center gap-3 mb-4 p-3 bg-gray-50 rounded-xl">
              <div className="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center">
                <User className="w-6 h-6 text-white" />
              </div>
              <div>
                <p className="font-semibold text-gray-900">{articleData.author}</p>
                <p className="text-sm text-gray-600">{articleData.authorRole}</p>
              </div>
            </div>

            {/* التصنيفات */}
            <div className="grid grid-cols-2 gap-4 mb-4">
              <div>
                <label className={`text-sm font-medium mb-1 block transition-colors duration-300 ${
                  darkMode ? 'text-gray-300' : 'text-gray-700'
                }`}>التصنيف الرئيسي</label>
                <span className="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-medium">
                  {articleData.category}
                </span>
              </div>
              <div>
                <label className={`text-sm font-medium mb-1 block transition-colors duration-300 ${
                  darkMode ? 'text-gray-300' : 'text-gray-700'
                }`}>التصنيف الفرعي</label>
                <span className="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-xs font-medium">
                  {articleData.subCategory}
                </span>
              </div>
            </div>

            {/* التواريخ */}
            <div className="space-y-3 mb-4">
              <div className="flex items-center gap-2 text-sm">
                <Calendar className="w-4 h-4 text-blue-600" />
                <span className={`transition-colors duration-300 ${
                  darkMode ? 'text-gray-400' : 'text-gray-600'
                }`}>تاريخ النشر:</span>
                <span className={`font-medium transition-colors duration-300 ${
                  darkMode ? 'text-gray-200' : 'text-gray-800'
                }`}>{formatDate(articleData.publishedAt)}</span>
              </div>
              <div className="flex items-center gap-2 text-sm">
                <Clock className="w-4 h-4 text-orange-600" />
                <span className={`transition-colors duration-300 ${
                  darkMode ? 'text-gray-400' : 'text-gray-600'
                }`}>آخر تحديث:</span>
                <span className={`font-medium transition-colors duration-300 ${
                  darkMode ? 'text-gray-200' : 'text-gray-800'
                }`}>{formatRelativeTime(articleData.updatedAt)}</span>
              </div>
            </div>

            {/* الموقع الجغرافي */}
            <div className="flex items-center gap-2 text-sm mb-4">
              <MapPin className="w-4 h-4 text-red-600" />
              <span className={`transition-colors duration-300 ${
                darkMode ? 'text-gray-400' : 'text-gray-600'
              }`}>موقع الخبر:</span>
              <span className={`font-medium transition-colors duration-300 ${
                darkMode ? 'text-gray-200' : 'text-gray-800'
              }`}>{articleData.location}</span>
            </div>

            {/* إحصائيات سريعة */}
            <div className="grid grid-cols-2 gap-4 mb-4">
              <div className="bg-blue-50 p-3 rounded-xl text-center">
                <div className="text-lg font-bold text-blue-600">{articleData.readTime}</div>
                <div className="text-xs text-blue-700">وقت القراءة</div>
              </div>
              <div className="bg-green-50 p-3 rounded-xl text-center">
                <div className="text-lg font-bold text-green-600">{articleData.wordCount}</div>
                <div className="text-xs text-green-700">كلمة</div>
              </div>
            </div>

            {/* الكلمات المفتاحية */}
            <div className="mb-6">
              <label className={`text-sm font-medium mb-2 block transition-colors duration-300 ${
                darkMode ? 'text-gray-300' : 'text-gray-700'
              }`}>الكلمات المفتاحية</label>
              <div className="flex flex-wrap gap-2">
                {articleData.tags.map((tag, index) => (
                  <span key={index} className="bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1">
                    <Hash className="w-3 h-3" />
                    {tag}
                  </span>
                ))}
              </div>
            </div>
          </div>

          {/* تقييم الذكاء الاصطناعي */}
          <div className={`rounded-2xl p-6 shadow-sm border transition-colors duration-300 ${
            darkMode 
              ? 'bg-gray-800 border-gray-700' 
              : 'bg-white border-gray-100'
          }`}>
            <h3 className={`text-lg font-bold mb-4 transition-colors duration-300 ${
              darkMode ? 'text-white' : 'text-gray-800'
            }`}>🧠 تقييم الذكاء الاصطناعي</h3>
            
            <div className="space-y-4">
              <div>
                <div className="flex justify-between items-center mb-2">
                  <span className={`text-sm font-medium transition-colors duration-300 ${
                    darkMode ? 'text-gray-300' : 'text-gray-700'
                  }`}>جودة المحتوى</span>
                  <span className="text-sm font-bold text-blue-600">{articleData.aiQualityScore}%</span>
                </div>
                <div className="w-full bg-gray-200 rounded-full h-2">
                  <div 
                    className="bg-blue-600 h-2 rounded-full transition-all duration-300"
                    style={{ width: `${articleData.aiQualityScore}%` }}
                  ></div>
                </div>
              </div>
              
              <div>
                <div className="flex justify-between items-center mb-2">
                  <span className={`text-sm font-medium transition-colors duration-300 ${
                    darkMode ? 'text-gray-300' : 'text-gray-700'
                  }`}>تحسين محركات البحث</span>
                  <span className="text-sm font-bold text-green-600">{articleData.seoScore}%</span>
                </div>
                <div className="w-full bg-gray-200 rounded-full h-2">
                  <div 
                    className="bg-green-600 h-2 rounded-full transition-all duration-300"
                    style={{ width: `${articleData.seoScore}%` }}
                  ></div>
                </div>
              </div>
            </div>

            {/* تنبيهات الذكاء الاصطناعي */}
            <div className="mt-4 space-y-2">
              <div className="p-3 rounded-xl flex items-center gap-2 bg-green-50 border border-green-200">
                <CheckCircle className="w-4 h-4 text-green-600" />
                <span className="text-sm">المحتوى عالي الجودة ومناسب للنشر</span>
              </div>
              <div className="p-3 rounded-xl flex items-center gap-2 bg-blue-50 border border-blue-200">
                <CheckCircle className="w-4 h-4 text-blue-600" />
                <span className="text-sm">تحسين محركات البحث ممتاز</span>
              </div>
            </div>
          </div>

          {/* إحصائيات التفاعل */}
          <div className="grid grid-cols-2 gap-4">
            <CircularStatsCard
              title="إعجاب"
              value={articleData.engagement.likes.toString()}
              subtitle="تفاعل"
              icon={Heart}
              bgColor="bg-red-100"
              iconColor="text-red-600"
            />
            <CircularStatsCard
              title="مشاركة"
              value={articleData.engagement.shares.toString()}
              subtitle="شارك"
              icon={Share2}
              bgColor="bg-blue-100"
              iconColor="text-blue-600"
            />
            <CircularStatsCard
              title="تعليق"
              value={articleData.engagement.comments.toString()}
              subtitle="رد"
              icon={MessageSquare}
              bgColor="bg-green-100"
              iconColor="text-green-600"
            />
            <CircularStatsCard
              title="حفظ"
              value={articleData.engagement.saves.toString()}
              subtitle="محفوظ"
              icon={Bookmark}
              bgColor="bg-purple-100"
              iconColor="text-purple-600"
            />
          </div>
        </div>
      </div>

      {/* نافذة حذف المقال */}
      {showDeleteModal && (
        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
          <div className={`rounded-2xl p-6 max-w-md w-full mx-4 shadow-xl ${
            darkMode ? 'bg-gray-800' : 'bg-white'
          }`}>
            <h3 className="text-lg font-bold text-red-600 mb-4">⚠️ تأكيد الحذف</h3>
            <p className={`mb-6 transition-colors duration-300 ${
              darkMode ? 'text-gray-300' : 'text-gray-700'
            }`}>
              هل أنت متأكد من حذف هذا المقال؟ هذا الإجراء لا يمكن التراجع عنه.
            </p>
            <div className="flex gap-3">
              <button 
                onClick={() => setShowDeleteModal(false)}
                className={`flex-1 px-4 py-2 rounded-xl border transition-colors duration-300 ${
                  darkMode 
                    ? 'border-gray-600 text-gray-300 hover:bg-gray-700' 
                    : 'border-gray-300 text-gray-600 hover:bg-gray-50'
                }`}
              >
                إلغاء
              </button>
              <button className="flex-1 px-4 py-2 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-colors">
                حذف نهائي
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}