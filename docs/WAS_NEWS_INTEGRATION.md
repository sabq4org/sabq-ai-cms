# ุฏููู ุชูุงูู ุฃุฎุจุงุฑ ูุงุณ (ููุงูุฉ ุงูุฃูุจุงุก ุงูุณุนูุฏูุฉ)

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅูุดุงุก ูุณู ูุชูุงูู ูุฌูุจ ูุนุฑุถ ุงูุฃุฎุจุงุฑ ูู ููุงูุฉ ุงูุฃูุจุงุก ุงูุณุนูุฏูุฉ (ูุงุณ) ุนุจุฑ API ุงูุฑุณูู.

## โ๏ธ ุญุงูุฉ ุงูุฎุฏูุฉ ุงูุญุงููุฉ

**ุชุญุฏูุซ ููู (ุฏูุณูุจุฑ 2024):** ุฎุฏูุฉ ูุงุณ API ุชูุงุฌู ูุดุงูู ุชูููุฉ ูู ุฌูุฉ ุงูุณูุฑูุฑ (ุฎุทุฃ 400/500).

### ุงููุดููุฉ:
- ุฌููุน endpoints ูุง ุนุฏุง `Get_Status` ุชูุฑุฌุน ุฎุทุฃ 400 ุฃู 500
- ุชู ุงูุชุญูู ูู ุตุญุฉ ุงูููุงุชูุญ ูุงูุจูุงูุงุช (Client Status: Active)
- ุงููุดููุฉ ูู ุฌูุฉ ุณูุฑูุฑ ูุงุณ ูููุณุช ูู ุงูููุฏ

### ูุง ุชู ุงูุชุญูู ููู:
- โ API Key ุตุญูุญ ููุดุท
- โ Client credentials ุตุญูุญุฉ (SABQ)
- โ Endpoints ุตุญูุญุฉ
- โ ุทุฑููุฉ ุงูุงุณุชุฏุนุงุก ุตุญูุญุฉ (GET ูุน body)
- โ ุชู ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ูู ุงูุจุฑููุจุช ุงูุฑุณูู
- โ ุงูุณูุฑูุฑ ููุฑุฌุน ุฃุฎุทุงุก ููุทูุจุงุช

### ุงูุชูุตูุงุช:
1. ุงูุชุธุงุฑ ุญู ุงููุดููุฉ ูู ุฌูุฉ ูุงุณ
2. ุงูุชูุงุตู ูุน ุงูุฏุนู ุงูููู ููุงุณ
3. ุงูููุฏ ุฌุงูุฒ 100% ูุณูุนูู ููุฑ ุญู ุงููุดููุฉ

## ๐ต ุงูุจุฑููุจุช ุงูุฑุณูู ููุฑุจุท

ุชู ุงุณุชูุงู ุจุฑููุจุช ูุชูุงูู ูู ุงููุฑูู ูุญุชูู ุนูู:

### ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงููุทููุจุฉ:
```env
SPA_API_URL=https://nwdistapi.spa.gov.sa/
SPA_API_KEY=owuDXImzoEIyRUJ4564z75O9WKGn44456353459bOOdfgdfxfV7qsvkEn5drAssdgfsgrdfgfdE3Q8drNupAHpHMTlljEkfjfjkfjkfjkfi84jksjds456d568y27893289kj89389d889jkjkjkdk490k3656d5asklskGGP
SPA_CLIENT_KEY=olU7cUWPqYGizEUMkau0iUw2xgMkLiJMrUcP6pweIWMp04mlNcW7pF/J12loX6YWHfw/kdQP4E7SPysGCzgK027taWDp11dvC2BYtE+W1nOSzqhHC2wPXz/LBqfSdbqSMxx0ur8Py4NVsPeq2PgQL4UqeXNak1qBknm45pbAW+4=
SPA_CLIENT_NAME=SABQ
```

### ูุชุทูุจุงุช ุงูุฑุจุท ุงูุจุฑูุฌู:
- โ ุชูุฑูุฑ ุงููุชุบูุฑุงุช ูู ูู ุทูุจ
- โ ุฌููุน ุงูุทูุจุงุช ุนุจุฑ HTTPS ููุท
- โ ุงูุชุนุงูู ูุน ูู ุงูุฃุฎุทุงุก ุงูุจุฑูุฌูุฉ
- โ ุงูุงุณุชุฌุงุจุฉ ูููุนุงููุฑ ุบูุฑ ุงููุธูููุฉ

## ๐๏ธ ุงูููููุงุช

### 1. API Endpoint
**ุงููุณุงุฑ:** `/app/api/was-news/route.ts`

**ุงููููุฒุงุช:**
- ุฌูุจ ุงูุฃุฎุจุงุฑ ูู API ูุงุณ ุงูุฑุณูู
- ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ
- ุฏุนู GET ู POST
- ุชุญููู ุงูุจูุงูุงุช ูุตูุบุฉ ููุญุฏุฉ
- ูุญุต ุญุงูุฉ ุงูุงุชุตุงู

**ุงุณุชุฎุฏุงู API:**
```bash
# ุฌูุจ ุงูุฃุฎุจุงุฑ
GET /api/was-news

# ุฌูุจ ุงูุฃุฎุจุงุฑ ูุน ููุงุชุฑ
POST /api/was-news
{
  "last_news_CD": 0,
  "basket_CD": 1,
  "IS_load_media": true
}
```

### 2. ุตูุญุฉ ููุญุฉ ุงูุชุญูู
**ุงููุณุงุฑ:** `/app/dashboard/was-news/page.tsx`

**ุงููููุฒุงุช:**
- ูุงุฌูุฉ ูุชุฌุงูุจุฉ ูุฌูููุฉ
- ุนุฑุถ ุงูุจูุงูุงุช ุงูุฅุญุตุงุฆูุฉ
- ุจุญุซ ูููุชุฑุฉ ูุชูุฏูุฉ
- ุชุญุฏูุซ ุชููุงุฆู ูู 10 ุฏูุงุฆู
- ุนุฑุถ ุชูุงุตูู ุงูุฃุฎุจุงุฑ ูุน ุงูุตูุฑ
- ุฏุนู ุงููุถุน ุงููููู
- ูุนุงูุฌุฉ ุฐููุฉ ููุฃุฎุทุงุก

### 3. ูุงุฆูุฉ ุงูุชููู
ุชู ุฅุถุงูุฉ ุฑุงุจุท "ุฃุฎุจุงุฑ ูุงุณ" ูู ูุณู "ุงููุญุชูู ูุงูุชุญุฑูุฑ" ูู ูุงุฆูุฉ ููุญุฉ ุงูุชุญูู.

## โ๏ธ ุงูุชูููู

### ููุงุชูุญ API ูุงุณ
```javascript
const SPA_API_KEY = "owuDXImzoEIyRUJ4564z75O9WKGn44456353459bOOdfgdfxfV7qsvkEn5drAssdgfsgrdfgfdE3Q8drNupAHpHMTlljEkfjfjkfjkfjkfi84jksjds456d568y27893289kj89389d889jkjkjkdk490k3656d5asklskGGP";
const SPA_CLIENT_NAME = "SABQ";
const SPA_CLIENT_KEY = "olU7cUWPqYGizEUMkau0iUw2xgMkLiJMrUcP6pweIWMp04mlNcW7pF/J12loX6YWHfw/kdQP4E7SPysGCzgK027taWDp11dvC2BYtE+W1nOSzqhHC2wPXz/LBqfSdbqSMxx0ur8Py4NVsPeq2PgQL4UqeXNak1qBknm45pbAW+4=";
```

### Endpoints ุงููุชุงุญุฉ
```javascript
const ENDPOINTS = {
  GET_STATUS: "https://nwDistAPI.spa.gov.sa/api/ClientAppSDAIA/Get_Status",
  GET_NEXT_NEWS: "https://nwDistAPI.spa.gov.sa/api/ClientAppSDAIA/Get_Next_News",
  GET_BASKETS: "https://nwDistAPI.spa.gov.sa/api/ClientAppSDAIA/Get_Baskets"
};
```

### ูููู ุงูุจูุงูุงุช
```typescript
interface WasNewsItem {
  id: string;
  title: string;
  summary?: string;
  content?: string;
  publishDate: string;
  category?: string;
  imageUrl?: string;
  priority?: string;
  language?: string;
}
```

### ูุนุงููุงุช ุงูุทูุจ
```javascript
{
  "Client": {
    "client_name_TXT": "SABQ",
    "client_key_TXT": "olU7cUWPqYGizEUMkau0iUw2xgMkLiJM..."
  },
  "last_news_CD": 0,      // ุขุฎุฑ ุฑูู ุฎุจุฑ ุชู ุฌูุจู
  "basket_CD": 1,         // ุฑูู ุงูุณูุฉ
  "IS_recived": true,     // ุชุฃููุฏ ุงูุงุณุชูุงู
  "IS_load_media": true   // ุชุญููู ุงููุณุงุฆุท
}
```

## ๐ง ุงูุงุณุชุฎุฏุงู

### 1. ุงููุตูู ููุตูุญุฉ
ุฒุฑ ููุญุฉ ุงูุชุญูู โ ุงููุญุชูู ูุงูุชุญุฑูุฑ โ ุฃุฎุจุงุฑ ูุงุณ

ุฃู ูุจุงุดุฑุฉ: `http://localhost:3000/dashboard/was-news`

### 2. ุงููููุฒุงุช ุงููุชููุฑุฉ
- **ุนุฑุถ ุฅุญุตุงุฆู:** ุฅุฌูุงูู ุงูุฃุฎุจุงุฑุ ุงูุชุตูููุงุชุ ุขุฎุฑ ุชุญุฏูุซุ ุญุงูุฉ ุงูุงุชุตุงู
- **ุจุญุซ ูุชูุฏู:** ุงูุจุญุซ ูู ุงูุนูุงููู ูุงูููุฎุตุงุช
- **ููุชุฑุฉ:** ุญุณุจ ุงูุชุตููู
- **ุชุฑุชูุจ:** ุญุณุจ ุงูุชุงุฑูุฎุ ุงูุนููุงูุ ุฃู ุงูุชุตููู
- **ุชุญุฏูุซ ุชููุงุฆู:** ูู 10 ุฏูุงุฆู
- **ุชุญุฏูุซ ูุฏูู:** ุฒุฑ ุงูุชุญุฏูุซ

### 3. ุนุฑุถ ุงูุฃุฎุจุงุฑ
- ุนุฑุถ ุดุจูู ูุชุฌุงูุจ (3 ุฃุนูุฏุฉ ุนูู ุงูุดุงุดุงุช ุงููุจูุฑุฉ)
- ุตูุฑ ุงูุฃุฎุจุงุฑ (ุฅู ูุฌุฏุช)
- ูุคุดุฑ ุงูุฃููููุฉ (ุฃุญูุฑุ ุฃุตูุฑุ ุฃุฎุถุฑ)
- ุงูุชุตููู ูุงููุบุฉ
- ููุช ุงููุดุฑ (ูุณุจู ููุทูู)

## ๐๏ธ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### ุฃุฎุทุงุก API ุดุงุฆุนุฉ:
- **400:** Bad Request - ูุดููุฉ ูู ุตูุบุฉ ุงูุจูุงูุงุช
- **404:** endpoint ุบูุฑ ุตุญูุญ
- **405:** method ุบูุฑ ูุณููุญ
- **500:** ุฎุทุฃ ูู ุณูุฑูุฑ ูุงุณ
- **401/403:** ูุดููุฉ ูู ุงูููุงุชูุญ
- **Network:** ูุดููุฉ ูู ุงูุงุชุตุงู

### ุงูุงุณุชุฌุงุจุฉ ููุฃุฎุทุงุก:
- ุนุฑุถ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุงูุชููุงุฆูุฉ
- ุนุฑุถ ุญุงูุฉ ุงูุงุชุตุงู ูู ุงููุงุฌูุฉ
- ุฅุฑุดุงุฏุงุช ุฎุงุตุฉ ููู ููุน ุฎุทุฃ

## ๐ฑ ุงูุชุฌุงูุจ

ุงููุงุฌูุฉ ูุญุณููุฉ ููุฃุฌูุฒุฉ ุงููุฎุชููุฉ:
- **ููุจุงูู:** ุนููุฏ ูุงุญุฏ
- **ุชุงุจูุช:** ุนููุฏุงู
- **ุณุทุญ ุงูููุชุจ:** ุซูุงุซุฉ ุฃุนูุฏุฉ

## ๐ ุงูุชุญุฏูุซ ุงูุชููุงุฆู

- ุชุญุฏูุซ ุชููุงุฆู ูู 10 ุฏูุงุฆู
- ุนุฏู ุฅุธูุงุฑ ูุคุดุฑ ุงูุชุญููู ุฃุซูุงุก ุงูุชุญุฏูุซ ุงูุชููุงุฆู
- ุญูุธ ุขุฎุฑ ููุช ุชุญุฏูุซ

## ๐จ ุงูุชุตููู

- ุฏุนู ุงููุถุน ุงููููู/ุงูููุงุฑู
- ุชุตููู ูุชุฏุฑุฌ ูุฃููู
- ุฃููููุงุช ูุงุถุญุฉ
- ุงูุชูุงูุงุช ุณูุณุฉ
- ุฃููุงู ุชูููุฒูุฉ ููุญุงูุงุช

## ๐ ุงูุชุทููุฑ ุงููุณุชูุจูู

### ูููุฒุงุช ููุชุฑุญุฉ:
1. **ุญูุธ ุงูุฃุฎุจุงุฑ:** ุฅููุงููุฉ ุญูุธ ุฃุฎุจุงุฑ ูููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. **ุฅุดุนุงุฑุงุช:** ุชูุจููุงุช ููุฃุฎุจุงุฑ ุงูุนุงุฌูุฉ
3. **ุชุตุฏูุฑ:** ุชุตุฏูุฑ ุงูุฃุฎุจุงุฑ ุจุตูุบ ูุฎุชููุฉ
4. **ุชุญูููุงุช:** ุฅุญุตุงุฆูุงุช ุนู ุงุณุชููุงู ุงูุฃุฎุจุงุฑ
5. **ูุดุงุฑูุฉ:** ูุดุงุฑูุฉ ุงูุฃุฎุจุงุฑ ุนูู ุงูููุตุงุช ุงูุงุฌุชูุงุนูุฉ

### ุชุญุณููุงุช ุชูููุฉ:
1. **Cache:** ุชุฎุฒูู ูุคูุช ููุฃุฎุจุงุฑ
2. **Pagination:** ุชูุณูู ุงููุชุงุฆุฌ ูุตูุญุงุช
3. **Real-time:** ุชุญุฏูุซ ููุฑู ุนุจุฑ WebSocket
4. **Integration:** ุฑุจุท ูุน ูุธุงู ุฅุฏุงุฑุฉ ุงููุญุชูู

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดููุฉ ุนุฏู ุธููุฑ ุงูุฃุฎุจุงุฑ:
1. ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
2. ุชุฃูุฏ ูู ุตุญุฉ ููุงุชูุญ API
3. ุชุญูู ูู ุณุฌูุงุช ุงููุชุตูุญ
4. ุงุฎุชุจุฑ API ูุจุงุดุฑุฉ: `/api/was-news`

### ูุดููุฉ ุงูุจุทุก:
1. ุฒุฏ ูููุฉ timeout ูู API
2. ุชุญูู ูู ุณุฑุนุฉ ุงูุฅูุชุฑูุช
3. ุฑุงุฌุน ุณุฌูุงุช ุงูุฎุงุฏู

### ุฎุทุฃ 400/500 ูู ูุงุณ:
1. ุงููุดููุฉ ูู ุฌูุฉ ุณูุฑูุฑ ูุงุณ
2. ุงูุชุธุฑ ุญุชู ูุชู ุญู ุงููุดููุฉ
3. ุชูุงุตู ูุน ุงูุฏุนู ุงูููู ููุงุณ

## ๐ ูุฑุงูุจุฉ ุญุงูุฉ ุงูุฎุฏูุฉ

ุชู ุฅูุดุงุก ุณูุฑูุจุช ููุฑุงูุจุฉ ุญุงูุฉ ูุงุณ API ุจุดูู ุฏูุฑู:

```bash
# ุชุดุบูู ุงูุณูุฑูุจุช
./scripts/check-was-api-status.sh

# ุงูุณูุฑูุจุช ูููู ุจู:
# - ูุญุต ุญุงูุฉ ุงูุฎุฏูุฉ ูู 5 ุฏูุงุฆู
# - ุฅุธูุงุฑ ุญุงูุฉ ูู endpoint
# - ุชูุจูู ุตูุชู ุนูุฏ ุนูุฏุฉ ุงูุฎุฏูุฉ
# - ุฅููุงู ุชููุงุฆู ุนูุฏ ูุฌุงุญ ุงูุงุชุตุงู
```

## ๐ก ุชูุจููุงุช ูุงูุฉ

ุจูุงุกู ุนูู ุงูุจุฑููุจุช ุงูุฑุณูู:
- โ ุชุฃูุฏ ูู ุตุญุฉ ุงุณู ุงูุนููู ูููุชุงุญ ุงูุนููู ุญุณุจ ุจูุงูุงุช ุงูุนูุฏ
- โ ุฌููุน ุงูุจูุงูุงุช ุงููุณุชููุฉ ูุชู ุงูุชุนุงูู ูุนูุง ููู ุจููุฉ NewsData
- โ ุงุณุชุฎุฏู ุฎุงุตูุฉ IS_load_media: true ูุชุญููู ุงููุณุงุฆุท ุชููุงุฆูุงู
- โ ููุถู ุงูุงุญุชูุงุธ ุจุฑูู ุขุฎุฑ ุฎุจุฑ ุชู ุฌูุจู last_news_CD ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุนุงูุฌ ุงูุฃููุงุฏ ุงูุชู ุชุชุนูู ุจุงููุตุงุฏูุฉ ููุงุฌูุงุช REST ุจุฏูุฉ ุดุฏูุฏุฉ

## ๐ ุงูุฏุนู

ููุฏุนู ุงูุชููู ุฃู ุงูุงุณุชูุณุงุฑุงุชุ ุฑุงุฌุน:
- ุณุฌูุงุช ุงููุชุตูุญ (F12 โ Console)
- ุณุฌูุงุช ุงูุฎุงุฏู
- ููู ุงูุชูุซูู ุงูุฑุฆูุณู
- ุงูุจุฑููุจุช ุงูุฑุณูู ุงููุฑูู 