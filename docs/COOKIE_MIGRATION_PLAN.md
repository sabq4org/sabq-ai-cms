# خطة ترحيل الكوكيز القديمة
**تاريخ الإنشاء:** 24 أغسطس 2025

## 1. الوضع الحالي

### الكوكيز المستخدمة حالياً:
- ✅ `sabq_at` - Access Token (HttpOnly) - **الأساسي**
- ✅ `sabq_rt` - Refresh Token (HttpOnly) - **الأساسي**
- ⚠️ `access_token` - نسخة مكررة من sabq_at - **للتوافق**
- ⚠️ `refresh_token` - نسخة مكررة من sabq_rt - **للتوافق**
- ❌ `auth-token` - غير HttpOnly - **يجب إزالته**
- ✅ `csrf-token` - للحماية من CSRF - **مطلوب**

## 2. خطة الإزالة التدريجية

### المرحلة 1: التحقق (أسبوع واحد)
1. مراقبة استخدام `auth-token` في السجلات
2. البحث عن أي كود يعتمد عليه
3. تحديث أي مكونات تستخدمه

### المرحلة 2: التحذير (أسبوع واحد)
1. إضافة تحذير في console عند استخدام `auth-token`
2. إرسال تنبيهات للمطورين
3. تحديث الوثائق

### المرحلة 3: الإزالة (أسبوعين)
1. إزالة `auth-token` من login route
2. إزالة `access_token` و `refresh_token` المكررة
3. الاحتفاظ فقط بـ `sabq_at` و `sabq_rt`

## 3. نقاط التحقق

### قبل إزالة كل كوكي:
- [ ] لا توجد أخطاء في السجلات
- [ ] جميع الاختبارات تمر بنجاح
- [ ] لا توجد شكاوى من المستخدمين
- [ ] تم تحديث جميع المكونات

## 4. خطة الطوارئ

في حالة حدوث مشاكل:
1. إعادة الكوكيز المحذوفة فوراً
2. تحليل السبب
3. تحديث الخطة
4. إعادة المحاولة

## 5. الجدول الزمني

| التاريخ | المرحلة | الإجراء |
|---------|---------|---------|
| الأسبوع 1 | التحقق | مراقبة وتحليل |
| الأسبوع 2 | التحذير | إضافة تحذيرات |
| الأسبوع 3-4 | الإزالة | إزالة تدريجية |
| الأسبوع 5 | التنظيف | إزالة الكود القديم |
