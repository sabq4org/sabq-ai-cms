# نظام البلوكات الذكية المتعددة - Smart Blocks System

## نظرة عامة
تم تطوير نظام متكامل لعرض المحتوى الذكي بأشكال متعددة ومرنة، يدعم 8 أنواع مختلفة من البلوكات القابلة للتخصيص.

## أنواع البلوكات المتاحة

### 1. بلوك البطاقات (Card View Block)
- **الوصف**: شبكة من البطاقات بمقاس موحد
- **المكون**: `CardGridBlock.tsx`
- **الميزات**:
  - صورة + عنوان + تصنيف + توقيت النشر
  - أيقونة الكاتب ومعلومات إضافية
  - تكيف تلقائي مع عدد المقالات (2-4 أعمدة)
  - تأثيرات hover جذابة

### 2. بلوك العناوين (Headline List Block)
- **الوصف**: قائمة نصوص فقط بعناوين المقالات
- **المكون**: `HeadlineListBlock.tsx`
- **الميزات**:
  - ترقيم للمقالات الأولى (1, 2, 3)
  - نقاط للمقالات التالية
  - شارة "عاجل" للأخبار العاجلة
  - وقت القراءة المقدر

### 3. بلوك صورة يسار (Image Left Block)
- **الوصف**: صورة مصغرة ثابتة بجوار عنوان المقال
- **المكون**: `ImageLeftBlock.tsx`
- **الميزات**:
  - صورة مصغرة على اليسار
  - عنوان وملخص على اليمين
  - معلومات التصنيف والتاريخ
  - عدد المشاهدات

### 4. بلوك الكاروسيل (Carousel Block)
- **الوصف**: تمرير أفقي للمحتوى مع دعم اللمس
- **المكون**: `CarouselBlock.tsx`
- **الميزات**:
  - تشغيل تلقائي كل 5 ثوانٍ
  - أزرار تحكم للتنقل
  - مؤشرات في الأسفل
  - تكيف مع حجم الشاشة (1-3 بطاقات)

### 5. بلوك HTML المخصص
- **الوصف**: كود HTML مخصص للإعلانات أو المحتوى الخاص
- **المكون**: `HtmlBlock.tsx`
- **الميزات**:
  - دعم كامل لـ HTML/CSS
  - متغيرات CSS للألوان من الثيم

## البنية التقنية

### هيكل المجلدات
```
components/
├── smart-blocks/
│   ├── SmartBlockRenderer.tsx    # المكون الرئيسي
│   ├── CardGridBlock.tsx         # بلوك البطاقات
│   ├── HeadlineListBlock.tsx     # بلوك العناوين
│   ├── ImageLeftBlock.tsx        # بلوك صورة يسار
│   ├── CarouselBlock.tsx         # بلوك الكاروسيل
│   └── HtmlBlock.tsx            # بلوك HTML
└── home/
    └── SmartSlot.tsx            # نقطة الحقن في الصفحات
```

### واجهة البيانات
```typescript
interface SmartBlock {
  id: string;
  name: string;
  type: 'smart' | 'custom' | 'html';
  displayType: 'cards' | 'headline' | 'image-left' | 'carousel' | 'grid' | 'list' | 'horizontal' | 'gallery';
  theme: {
    primaryColor: string;
    backgroundColor: string;
    textColor: string;
  };
  keywords?: string[];
  category?: string;
  articlesCount: number;
  padding?: string;
  margin?: string;
  bgColor?: string;
  visibility?: 'all' | 'guest' | 'user';
  maxItems?: number;
}
```

## إعدادات لوحة التحكم

### صفحة إدارة البلوكات
- **المسار**: `/dashboard/smart-blocks`
- **الميزات**:
  - إنشاء وتعديل البلوكات
  - معاينة مباشرة للتصميم
  - ترتيب البلوكات بالسحب والإفلات
  - تفعيل/تعطيل البلوكات
  - جدولة البلوكات

### خيارات التخصيص
1. **نوع العرض**: اختيار من 8 أنواع مختلفة
2. **عدد المقالات**: من 1 إلى 20 مقال
3. **الألوان**: لون أساسي، خلفية، نص
4. **الموقع**: 5 مواقع مختلفة في الصفحة
5. **الظهور**: للجميع، للزوار فقط، للمستخدمين المسجلين فقط

## الاستخدام في الصفحات

### إضافة SmartSlot
```tsx
import SmartSlot from '@/components/home/SmartSlot';

// في أي صفحة
<SmartSlot 
  position="afterHighlights" 
  userType={user ? 'user' : 'guest'} 
/>
```

### المواقع المتاحة
- `topBanner`: أعلى الصفحة
- `afterHighlights`: بعد الأخبار المميزة
- `afterCards`: بعد البطاقات
- `beforePersonalization`: قبل المحتوى المخصص
- `beforeFooter`: قبل التذييل

## ميزات متقدمة

### 1. منع التكرار
- النظام يمنع تلقائياً تكرار نفس المقال في بلوكات متعددة على نفس الصفحة

### 2. التكيف مع الجوال
- جميع البلوكات تتحول لعرض عمودي في الشاشات الصغيرة
- الكاروسيل يدعم السحب باللمس

### 3. الأداء
- تحميل كسول للصور
- تحسين الرسوم المتحركة
- استخدام React.memo للمكونات

### 4. إمكانية الوصول
- دعم كامل للوحة المفاتيح
- ARIA labels للقارئات الصوتية
- تباين ألوان مناسب

## أمثلة الاستخدام

### 1. بلوك أخبار الرياضة (بطاقات)
```json
{
  "name": "أخبار الرياضة",
  "displayType": "cards",
  "keywords": ["رياضة", "كرة القدم"],
  "articlesCount": 4,
  "theme": {
    "primaryColor": "#3b82f6",
    "backgroundColor": "#ffffff",
    "textColor": "#1f2937"
  }
}
```

### 2. بلوك الأخبار العاجلة (عناوين)
```json
{
  "name": "عاجل",
  "displayType": "headline",
  "keywords": ["عاجل"],
  "articlesCount": 5,
  "theme": {
    "primaryColor": "#ef4444",
    "backgroundColor": "#fef2f2",
    "textColor": "#991b1b"
  }
}
```

### 3. بلوك التقارير (صورة يسار)
```json
{
  "name": "تقارير مميزة",
  "displayType": "image-left",
  "category": "تقارير",
  "articlesCount": 3,
  "theme": {
    "primaryColor": "#10b981",
    "backgroundColor": "#f0fdf4",
    "textColor": "#166534"
  }
}
```

## التوسع المستقبلي

### بلوكات قيد التطوير
1. **بلوك الفيديو**: عرض مقاطع الفيديو
2. **بلوك التصويت**: استطلاعات الرأي
3. **بلوك الإنفوجرافيك**: رسوم بيانية تفاعلية
4. **بلوك البودكاست**: مشغل صوتي مدمج

### تحسينات مخططة
- دعم A/B Testing للبلوكات
- تحليلات تفصيلية لكل بلوك
- قوالب جاهزة للبلوكات
- تصدير/استيراد إعدادات البلوكات 